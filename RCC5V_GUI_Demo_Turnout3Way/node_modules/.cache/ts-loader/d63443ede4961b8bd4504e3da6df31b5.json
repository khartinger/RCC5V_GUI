{"remainingRequest":"G:\\work3\\vue\\haus2\\node_modules\\thread-loader\\dist\\cjs.js!G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js??ref--13-2!G:\\work3\\vue\\haus2\\src\\controller\\CiText5LController.ts","dependencies":[{"path":"G:\\work3\\vue\\haus2\\src\\controller\\CiText5LController.ts","mtime":1672656677838},{"path":"G:\\work3\\vue\\haus2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOw0KLy8gX19fX19fQ2lUZXh0NUxDb250cm9sbGVyLnRzX19fX19fX19fX19fX19fX19fX2toYXJ0aW5nZXJfX19fXw0KLy8gMjAyMi0wOC0xMjogbmV3DQovLyAyMDIyLTA5LTE0OiBhZGQgLmNhdGNoKChlKSAuLikgdG8gdGhpcy5wdWJsaXNoDQovLyAyMDIzLTAxLTAyOiBpbXBvcnQgeyBnZW8wIH0gY2hhbmdlZA0KaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgQ2lCYXNlQ29udHJvbGxlciB9IGZyb20gJy4vQ2lCYXNlQ29udHJvbGxlcic7DQppbXBvcnQgeyBnZW8wIH0gZnJvbSAnLi4vY2xhc3Nlcy9HZW8nOw0KdmFyIENpVGV4dDVMQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsNCiAgICBfX2V4dGVuZHMoQ2lUZXh0NUxDb250cm9sbGVyLCBfc3VwZXIpOw0KICAgIGZ1bmN0aW9uIENpVGV4dDVMQ29udHJvbGxlcigpIHsNCiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7DQogICAgICAgIF90aGlzLnRleHQ1THMgPSByZWFjdGl2ZShbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICdtNGhXZG9nXzEnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdXYXRjaGRvZycsDQogICAgICAgICAgICAgICAgaVRleHQ1TFN0YXRlOiAxLA0KICAgICAgICAgICAgICAgIGxpbmVzOiBbJy0tV2F0Y2hkb2cgVGV4dDVMLS0nLCAnKE5vIGluZm8pJywgJycsICcnLCAnJ10sDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICdtNGhXZG9nL3JldC9vdmVyZHVlJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJ200aFdkb2cvZ2V0eCcsDQogICAgICAgICAgICAgICAgcHViUGF5bG9hZDogJ292ZXJkdWUnDQogICAgICAgICAgICB9DQogICAgICAgIF0pOw0KICAgICAgICByZXR1cm4gX3RoaXM7DQogICAgfQ0KICAgIC8vIC0tLS1zcGxpdCBhIHN0cmluZyB0byBhbiBhcnJheSBvZiBzdHJpbmdzIHdpdGggbWF4IGxlbi0tLS0tDQogICAgLy8gU3BlY2lhbDogKHRyeSB0bykgZG8gbm90IHNwbGl0IHdvcmRzIHdpdGggMiBjaGFyICgtPiBuZXh0IGxpbmUpDQogICAgLy8gczE6IGdpdmVuIHN0cmluZw0KICAgIC8vIG1heENoYXJQZXJMaW5lXzogbWF4IG51bWJlciBvZiBjaGFyIHBlciBlbGVtZW50IGluIGExDQogICAgQ2lUZXh0NUxDb250cm9sbGVyLnByb3RvdHlwZS5zcGxpdFRvQXJyYXkyID0gZnVuY3Rpb24gKHMxLCBtYXhDaGFyUGVyTGluZV8pIHsNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NwbGl0VG9BcnJheSBzMTogJywgczEpDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdzcGxpdFRvQXJyYXkgbWF4Q2hhclBlckxpbmVfOiAnLCBtYXhDaGFyUGVyTGluZV8pDQogICAgICAgIHZhciBhMSA9IFtdOw0KICAgICAgICBpZiAobWF4Q2hhclBlckxpbmVfIDwgMSkNCiAgICAgICAgICAgIHJldHVybiBhMTsNCiAgICAgICAgdmFyIHMxbGVuID0gczEubGVuZ3RoOw0KICAgICAgICBpZiAoczFsZW4gPCAxKQ0KICAgICAgICAgICAgcmV0dXJuIGExOw0KICAgICAgICB2YXIgaWExID0gMDsgLy8gICAgICAgICBJbmRleCBvZiBsaW5lIGluIGExDQogICAgICAgIHZhciBpU3RhcnQgPSAwOyAvLyAgICAgIEluZGV4IG9mIHN0YXJ0IGNoYXIgaW4gczEgb2YgdGhpcyBsaW5lDQogICAgICAgIHZhciBkb2xvb3AgPSB0cnVlOw0KICAgICAgICBkbyB7DQogICAgICAgICAgICB2YXIgaUVuZCA9IGlTdGFydCArIG1heENoYXJQZXJMaW5lXzsNCiAgICAgICAgICAgIGlmIChpRW5kID49IHMxbGVuKSB7DQogICAgICAgICAgICAgICAgLy8gLi4uLi4ubGFzdCBsaW5lLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uDQogICAgICAgICAgICAgICAgYTFbaWExXSA9IHMxLnN1YnN0cmluZyhpU3RhcnQpOw0KICAgICAgICAgICAgICAgIGRvbG9vcCA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gLi4uLi4ubm90IHRoZSBsYXN0IGxpbmUuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uDQogICAgICAgICAgICAgICAgaWYgKG1heENoYXJQZXJMaW5lXyA+IDEpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gLiAuIGlzIHRoZSBuZXh0IHRvIGxhc3QgbGV0dGVyIGEgc3BhY2U/IC4gLiAuIC4gLg0KICAgICAgICAgICAgICAgICAgICBpZiAoczFbaUVuZCAtIDJdID09PSAnICcpDQogICAgICAgICAgICAgICAgICAgICAgICBpRW5kID0gaUVuZCAtIDE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIC4uLi4uLnN0b3JlIGxpbmUuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLg0KICAgICAgICAgICAgICAgIGExW2lhMSsrXSA9IHMxLnN1YnN0cmluZyhpU3RhcnQsIGlFbmQpOw0KICAgICAgICAgICAgICAgIGlTdGFydCA9IGlFbmQ7IC8vICAgcHJlcGFyZSBzdGFydCBvZiBuZXh0IGxpbmUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSB3aGlsZSAoZG9sb29wKTsNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NwbGl0VG9BcnJheSBhMTogJywgYTEpDQogICAgICAgIHJldHVybiBhMTsNCiAgICB9Ow0KICAgIC8qDQogICAgLy8gLS0tLXNwbGl0IGEgc3RyaW5nIHRvIGEgYXJyYXkgb2Ygc3RyaW5ncyB3aXRoIG1heCBsZW4tLS0tLS0NCiAgICAvLyBzMTogZ2l2ZW4gc3RyaW5nDQogICAgLy8gbnVtQ2hhclBlckxpbmU6IG1heCBudW1iZXIgb2YgY2hhciBwZXIgZWxlbWVudCBpbiBhMQ0KICAgIHB1YmxpYyBzcGxpdFRvQXJyYXkyIChzMTogc3RyaW5nLCBudW1DaGFyUGVyTGluZTogbnVtYmVyKTogQXJyYXk8c3RyaW5nPiB7DQogICAgICBjb25zdCBhMTogc3RyaW5nW10gPSBbXQ0KICAgICAgbGV0IGkxID0gMCAvLyAgICAgICAgICAgIEluZGV4IG9mIGNoYXIgaW4gczENCiAgICAgIGxldCBpU3RhcnQgPSAwIC8vICAgICAgICBJbmRleCBvZiBzdGFydCBjaGFyIGluIHMxIG9mIHRoaXMgbGluZQ0KICAgICAgbGV0IGlhMSA9IDAgLy8gICAgICAgICAgIEluZGV4IG9mIGxpbmUgaW4gYTENCiAgICAgIC8vIGNvbnNvbGUubG9nKCdzcGxpdFRvQXJyYXkgczE6ICcsIHMxKQ0KICAgICAgLy8gY29uc29sZS5sb2coJ3NwbGl0VG9BcnJheSBudW1DaGFyUGVyTGluZTogJywgbnVtQ2hhclBlckxpbmUpDQogICAgICBjb25zdCBsZW5zMSA9IHMxLmxlbmd0aA0KICAgICAgZm9yIChpMSA9IDA7IGkxIDwgbGVuczE7IGkxKyspIHsNCiAgICAgICAgbGV0IGlFbmQgPSBpU3RhcnQgKyBudW1DaGFyUGVyTGluZQ0KICAgICAgICBpZiAoaUVuZCA+IGxlbnMxKSB7DQogICAgICAgICAgaUVuZCA9IGxlbnMxDQogICAgICAgICAgaTEgPSBsZW5zMSAvLyBlbmQgb2YgZm9yIGxvb3ANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoczEuYXQoaUVuZCAtIDIpID09PSAnICcgJiYgczEuYXQoaUVuZCkgIT09ICcgJykgaUVuZCA9IGlFbmQgLSAxDQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZiAoczEuYXQoaUVuZCkgPT09ICcgJykgaUVuZCsrDQogICAgICAgICAgfQ0KICAgICAgICAgIGExW2lhMSsrXSA9IHMxLnN1YnN0cmluZyhpU3RhcnQsIGlFbmQpDQogICAgICAgICAgaVN0YXJ0ID0gaUVuZA0KICAgICAgICB9DQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZygnc3BsaXRUb0FycmF5IGExOiAnLCBhMSkNCiAgICAgIHJldHVybiBhMQ0KICAgIH0NCiAgICAqLw0KICAgIC8vIC0tLS0tLS0tLU1lc3NhZ2UgZm9yIHRoaXMgY2kgKGNvbnRyb2wvaW5kaWNhdG9yKT8tLS0tLS0tLS0tDQogICAgQ2lUZXh0NUxDb250cm9sbGVyLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkgew0KICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgICAvLyAtLS0tLS0tc2VhcmNoIGZvciB0ZXh0NUwgdG9waWMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgdGhpcy50ZXh0NUxzLmZvckVhY2goZnVuY3Rpb24gKHRleHQ1TCkgew0KICAgICAgICAgICAgdmFyIGFTdWJUb3BpYyA9IHRleHQ1TC5zdWJUb3BpYy5zcGxpdCgnICcpOw0KICAgICAgICAgICAgaWYgKGFTdWJUb3BpYy5pbmNsdWRlcyhtZXNzYWdlLnRvcGljKSkgew0KICAgICAgICAgICAgICAgIC8vIC0tLXRleHQ1TCB0b3BpYyBmb3VuZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgdmFyIG1heENoYXJQZXJMaW5lID0gMiAqIGdlbzAudG1heDsNCiAgICAgICAgICAgICAgICB2YXIgbWF4TGluZXMgPSA1OyAvLyBtYXhpbXVtIG9mIGRpc3BsYXkgbGluZXMNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpTCA9IDA7IGlMIDwgbWF4TGluZXM7IGlMKyspDQogICAgICAgICAgICAgICAgICAgIHRleHQ1TC5saW5lc1tpTF0gPSAnICc7DQogICAgICAgICAgICAgICAgLy8gLi4uc3BsaXQgcGF5bG9hZCBpbnRvIHBhcnRzICgicGF5bG9hZCBsaW5lcyIpLi4uLi4uLi4NCiAgICAgICAgICAgICAgICB2YXIgczEgPSBtZXNzYWdlLnBheWxvYWQ7DQogICAgICAgICAgICAgICAgczEgPSBzMS5yZXBsYWNlQWxsKCdcXG4nLCAnXn4nKTsgLy8gcmVwbGFjZSAidGV4dCIgXG4NCiAgICAgICAgICAgICAgICB2YXIgYVBheSA9IFtdOw0KICAgICAgICAgICAgICAgIGFQYXkgPSBzMS5zcGxpdCgnXn4nKTsNCiAgICAgICAgICAgICAgICBpZiAoYVBheSA9PT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYVBheV8xID0gW107DQogICAgICAgICAgICAgICAgICAgIGFQYXlfMVswXSA9IHMxOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB2YXIgaVBheSA9IDA7IC8vICAgICAgICAgICAgICAgIGluZGV4IG9mIHBheWxvYWQgImxpbmVzIg0KICAgICAgICAgICAgICAgIHZhciBudW1QYXkgPSBhUGF5Lmxlbmd0aDsNCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQW56YWhsIFxcbj0nLCBudW1QYXkpDQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1BheWxvYWQ6ICcsIGFQYXkpDQogICAgICAgICAgICAgICAgLy8gLS0tc2hvdWxkIGxpbmUgMSBiZSBhIHRpdGxlPy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICB2YXIgaUxpbmUgPSAwOyAvLyAgICAgICAgICAgICAgIGluZGV4IG9mIGxpbmVzIHRvIGRpc3BsYXkNCiAgICAgICAgICAgICAgICBpZiAodGV4dDVMLmlUZXh0NUxTdGF0ZSA9PT0gMSkgeyAvLyB0aXRsZSA9IG5hbWUNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQ1TC5uYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDVMLmxpbmVzW2lMaW5lKytdID0gdGV4dDVMLm5hbWU7DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ1TC5saW5lc1tpTGluZSsrXSA9ICcnOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodGV4dDVMLmlUZXh0NUxTdGF0ZSA9PT0gMikgeyAvLyB0aXRsZSA9IGlkDQogICAgICAgICAgICAgICAgICAgIHRleHQ1TC5saW5lc1tpTGluZSsrXSA9IHRleHQ1TC5pZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKHRleHQ1TC5pVGV4dDVMU3RhdGUgPT09IDQpIHsgLy8gdGl0bGUgPSBwYXlsb2FkIGxpbmUgMA0KICAgICAgICAgICAgICAgICAgICB0ZXh0NUwubGluZXNbaUxpbmUrK10gPSBhUGF5W2lQYXkrK107DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vIC0tLWNvbnZlcnQgcGF5bG9hZCBsaW5lcyBpbnRvIGRpc3BsYXkgbGluZXMtLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgdmFyIGFIZWxwID0gW107DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaTEgPSBpUGF5OyBpMSA8IG51bVBheTsgaTErKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWFQYXlbaVBheV0pDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgYUhlbHAgPSBfdGhpcy5zcGxpdFRvQXJyYXkyKGFQYXlbaVBheSsrXSwgbWF4Q2hhclBlckxpbmUpOw0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYUhlbHA6ICcsIGFIZWxwKQ0KICAgICAgICAgICAgICAgICAgICB2YXIgbGVuSGVscCA9IGFIZWxwLmxlbmd0aDsNCiAgICAgICAgICAgICAgICAgICAgLy8gLXRyYW5zZmVyIGhlbHAgbGluZXMgdG8gZGlzcGxheSBsaW5lcy0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCBsZW5IZWxwOyBpMisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0NUwubGluZXNbaUxpbmUrK10gPSBhSGVscFtpMl07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaUxpbmUgPiBtYXhMaW5lcykgeyAvLyBmaW5pc2hlZC4gRW5kIGZvciBsb29wcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkyID0gbGVuSGVscDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpMSA9IG51bVBheTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gRU5EIHRleHQ1TCB0b3BpYyBmb3VuZA0KICAgICAgICB9KTsNCiAgICB9Ow0KICAgIENpVGV4dDVMQ29udHJvbGxlci5wcm90b3R5cGUucHVibGlzaENpID0gZnVuY3Rpb24gKHRvcGljLCBwYXlsb2FkKSB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdwdWJsaXNoOicsICctdCAnICsgdG9waWMgKyAnIC1tICcgKyBwYXlsb2FkKQ0KICAgICAgICB0aGlzLnB1Ymxpc2godG9waWMsIHBheWxvYWQsIGZhbHNlLCAwKS5jYXRjaChmdW5jdGlvbiAoZSkgeyBjb25zb2xlLmVycm9yKCdDaVRleHQ1TENvbnRyb2xsZXI6IEVSUk9SOicsIGUpOyB9KTsNCiAgICB9Ow0KICAgIHJldHVybiBDaVRleHQ1TENvbnRyb2xsZXI7DQp9KENpQmFzZUNvbnRyb2xsZXIpKTsNCmV4cG9ydCB7IENpVGV4dDVMQ29udHJvbGxlciB9Ow0KZXhwb3J0IHZhciBjaVRleHQ1TENvbnRyb2xsZXIgPSBuZXcgQ2lUZXh0NUxDb250cm9sbGVyKCk7DQo="},{"version":3,"file":"G:\\work3\\vue\\haus2\\src\\controller\\CiText5LController.ts","sourceRoot":"","sources":["G:\\work3\\vue\\haus2\\src\\controller\\CiText5LController.ts"],"names":[],"mappings":"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","sourcesContent":["// ______CiText5LController.ts___________________khartinger_____\r\n// 2022-08-12: new\r\n// 2022-09-14: add .catch((e) ..) to this.publish\r\n// 2023-01-02: import { geo0 } changed\r\nimport { reactive } from 'vue'\r\nimport { Message } from '@/services/CiMqttClient'\r\nimport { CiBaseController, IBase } from './CiBaseController'\r\nimport { geo0 } from '../classes/Geo'\r\n\r\nexport interface Text5L extends IBase {\r\n  iText5LState: number; // 0=no title, 1=name, 2=id, 4=message\r\n  lines: string[];\r\n}\r\n\r\nexport class CiText5LController extends CiBaseController {\r\n  public text5Ls: Array<Text5L> = reactive(\r\n    [\r\n      {\r\n        id: 'm4hWdog_1',\r\n        name: 'Watchdog',\r\n        iText5LState: 1,\r\n        lines: ['--Watchdog Text5L--', '(No info)', '', '', ''],\r\n        subTopic: 'm4hWdog/ret/overdue',\r\n        pubTopic: 'm4hWdog/getx',\r\n        pubPayload: 'overdue'\r\n      }\r\n    ]\r\n  );\r\n\r\n  // ----split a string to an array of strings with max len-----\r\n  // Special: (try to) do not split words with 2 char (-> next line)\r\n  // s1: given string\r\n  // maxCharPerLine_: max number of char per element in a1\r\n  public splitToArray2 (s1: string, maxCharPerLine_: number): Array<string> {\r\n    // console.log('splitToArray s1: ', s1)\r\n    // console.log('splitToArray maxCharPerLine_: ', maxCharPerLine_)\r\n    const a1: string[] = []\r\n    if (maxCharPerLine_ < 1) return a1\r\n    const s1len = s1.length\r\n    if (s1len < 1) return a1\r\n    let ia1 = 0 //         Index of line in a1\r\n    let iStart = 0 //      Index of start char in s1 of this line\r\n    let doloop = true\r\n    do {\r\n      let iEnd = iStart + maxCharPerLine_\r\n      if (iEnd >= s1len) {\r\n        // ......last line....................................\r\n        a1[ia1] = s1.substring(iStart)\r\n        doloop = false\r\n      } else {\r\n        // ......not the last line............................\r\n        if (maxCharPerLine_ > 1) {\r\n          // . . is the next to last letter a space? . . . . .\r\n          if (s1[iEnd - 2] === ' ') iEnd = iEnd - 1\r\n        }\r\n        // ......store line...................................\r\n        a1[ia1++] = s1.substring(iStart, iEnd)\r\n        iStart = iEnd //   prepare start of next line\r\n      }\r\n    }\r\n    while (doloop)\r\n    // console.log('splitToArray a1: ', a1)\r\n    return a1\r\n  }\r\n\r\n  /*\r\n  // ----split a string to a array of strings with max len------\r\n  // s1: given string\r\n  // numCharPerLine: max number of char per element in a1\r\n  public splitToArray2 (s1: string, numCharPerLine: number): Array<string> {\r\n    const a1: string[] = []\r\n    let i1 = 0 //            Index of char in s1\r\n    let iStart = 0 //        Index of start char in s1 of this line\r\n    let ia1 = 0 //           Index of line in a1\r\n    // console.log('splitToArray s1: ', s1)\r\n    // console.log('splitToArray numCharPerLine: ', numCharPerLine)\r\n    const lens1 = s1.length\r\n    for (i1 = 0; i1 < lens1; i1++) {\r\n      let iEnd = iStart + numCharPerLine\r\n      if (iEnd > lens1) {\r\n        iEnd = lens1\r\n        i1 = lens1 // end of for loop\r\n      } else {\r\n        if (s1.at(iEnd - 2) === ' ' && s1.at(iEnd) !== ' ') iEnd = iEnd - 1\r\n        else {\r\n          if (s1.at(iEnd) === ' ') iEnd++\r\n        }\r\n        a1[ia1++] = s1.substring(iStart, iEnd)\r\n        iStart = iEnd\r\n      }\r\n    }\r\n    // console.log('splitToArray a1: ', a1)\r\n    return a1\r\n  }\r\n  */\r\n\r\n  // ---------Message for this ci (control/indicator)?----------\r\n  public onMessage (message: Message): void {\r\n    // -------search for text5L topic---------------------------\r\n    this.text5Ls.forEach(text5L => {\r\n      const aSubTopic = text5L.subTopic.split(' ')\r\n      if (aSubTopic.includes(message.topic)) {\r\n        // ---text5L topic found -------------------------------\r\n        const maxCharPerLine = 2 * geo0.tmax\r\n        const maxLines = 5 // maximum of display lines\r\n        for (let iL = 0; iL < maxLines; iL++) text5L.lines[iL] = ' '\r\n        // ...split payload into parts (\"payload lines\")........\r\n        let s1 = message.payload\r\n        s1 = s1.replaceAll('\\\\n', '^~') // replace \"text\" \\n\r\n        let aPay: string[] = []\r\n        aPay = s1.split('^~')\r\n        if (aPay === null) {\r\n          const aPay: string[] = []\r\n          aPay[0] = s1\r\n        }\r\n        let iPay = 0 //                index of payload \"lines\"\r\n        const numPay = aPay.length\r\n        // console.log('Anzahl \\\\n=', numPay)\r\n        // console.log('Payload: ', aPay)\r\n        // ---should line 1 be a title?-------------------------\r\n        let iLine = 0 //               index of lines to display\r\n        if (text5L.iText5LState === 1) { // title = name\r\n          if (text5L.name) text5L.lines[iLine++] = text5L.name\r\n          else text5L.lines[iLine++] = ''\r\n        }\r\n        if (text5L.iText5LState === 2) { // title = id\r\n          text5L.lines[iLine++] = text5L.id\r\n        }\r\n        if (text5L.iText5LState === 4) { // title = payload line 0\r\n          text5L.lines[iLine++] = aPay[iPay++]\r\n        }\r\n        // ---convert payload lines into display lines----------\r\n        let aHelp: string[] = []\r\n        for (let i1 = iPay; i1 < numPay; i1++) {\r\n          if (!aPay[iPay]) break\r\n          aHelp = this.splitToArray2(aPay[iPay++], maxCharPerLine)\r\n          // console.log('aHelp: ', aHelp)\r\n          const lenHelp = aHelp.length\r\n          // -transfer help lines to display lines--------------\r\n          for (let i2 = 0; i2 < lenHelp; i2++) {\r\n            text5L.lines[iLine++] = aHelp[i2]\r\n            if (iLine > maxLines) { // finished. End for loops\r\n              i2 = lenHelp\r\n              i1 = numPay\r\n            }\r\n          }\r\n        }\r\n      } // END text5L topic found\r\n    })\r\n  }\r\n\r\n  public publishCi (topic: string, payload: string): void {\r\n    // console.log('publish:', '-t ' + topic + ' -m ' + payload)\r\n    this.publish(topic, payload, false, 0).catch((e) => { console.error('CiText5LController: ERROR:', e) })\r\n  }\r\n}\r\n\r\nexport const ciText5LController = new CiText5LController()\r\n"]}]}