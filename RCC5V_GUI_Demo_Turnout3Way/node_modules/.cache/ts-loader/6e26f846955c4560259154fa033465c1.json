{"remainingRequest":"G:\\work3\\vue\\haus3\\node_modules\\thread-loader\\dist\\cjs.js!G:\\work3\\vue\\haus3\\node_modules\\ts-loader\\index.js??ref--13-2!G:\\work3\\vue\\haus3\\src\\controller\\CiPump1Controller.ts","dependencies":[{"path":"G:\\work3\\vue\\haus3\\src\\controller\\CiPump1Controller.ts","mtime":1676485718243},{"path":"G:\\work3\\vue\\haus3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus3\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus3\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOw0KLy8gX19fX19fQ2lQdW1wMUNvbnRyb2xsZXIudHNfX19fX19fX19fX19fX19fX19fX2toYXJ0aW5nZXJfX19fXw0KLy8gMjAyMi0xMC0xOTogbmV3DQovLyAyMDIzLTAyLTE1OiBjaGFuZ2UgYXQgQ2lCYXNlIChhZGQgR2VvLnRzKQ0KaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgQ2lCYXNlQ29udHJvbGxlciB9IGZyb20gJy4vQ2lCYXNlQ29udHJvbGxlcic7DQppbXBvcnQgeyBnZW8wZiB9IGZyb20gJy4uL2NsYXNzZXMvR2VvJzsNCnZhciBDaVB1bXAxQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsNCiAgICBfX2V4dGVuZHMoQ2lQdW1wMUNvbnRyb2xsZXIsIF9zdXBlcik7DQogICAgZnVuY3Rpb24gQ2lQdW1wMUNvbnRyb2xsZXIoKSB7DQogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOw0KICAgICAgICBfdGhpcy5wdW1wMXMgPSByZWFjdGl2ZShbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICdwdW1wMycsDQogICAgICAgICAgICAgICAgbmFtZTogJ1B1bXBlMy0zMicsDQogICAgICAgICAgICAgICAgdHlwZTogJ0VTUDMyJywNCiAgICAgICAgICAgICAgICBpUHVtcDFTdGF0ZTogLTk5LA0KICAgICAgICAgICAgICAgIHNTZW5zb3I6ICctJywNCiAgICAgICAgICAgICAgICBzU3RhdHVzOiAnU3RhdHVzPycsDQogICAgICAgICAgICAgICAgbGFzdFB1bXAxRGF0ZTogJ0RhdGU/JywNCiAgICAgICAgICAgICAgICBsYXN0UHVtcDFUaW1lOiAnVGltZT8nLA0KICAgICAgICAgICAgICAgIHN1YlRvcGljOiAnaXAvaC9oejAvcHVtcGUvMy9yZXQvc3RhdHVzIGlwL2gvaHowL3B1bXBlLzMvdGltZScsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9DQogICAgICAgIF0pOw0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLXN0YXRlIGNvbnN0YW50cy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAvLyAgcHVibGljIHN0YXRlT2sgPSAtMTsNCiAgICAgICAgX3RoaXMuc3RhdGVPbiA9IC0xOw0KICAgICAgICBfdGhpcy5zdGF0ZU9mZiA9IC0yOw0KICAgICAgICBfdGhpcy5zdGF0ZU5vdE9rID0gLTk5ODsNCiAgICAgICAgX3RoaXMuc3RhdGVOb1N0YXRlID0gLTk5OTsNCiAgICAgICAgcmV0dXJuIF90aGlzOw0KICAgIH0NCiAgICAvLyAtLS0tLS0tLS0tLS0tLU1lc3NhZ2UgZm9yIHRoaXMgY2kgKGNvbnRyb2wvaW5kaWNhdG9yKT8tLS0tLQ0KICAgIENpUHVtcDFDb250cm9sbGVyLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkgew0KICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgICB0aGlzLnB1bXAxcy5mb3JFYWNoKGZ1bmN0aW9uIChwdW1wMSkgew0KICAgICAgICAgICAgdmFyIGFTdWJUb3BpYyA9IHB1bXAxLnN1YlRvcGljLnNwbGl0KCcgJyk7DQogICAgICAgICAgICBpZiAoYVN1YlRvcGljLmluY2x1ZGVzKG1lc3NhZ2UudG9waWMpKSB7DQogICAgICAgICAgICAgICAgLy8gLS0tLS0tLS1wdW1wMSB0b3BpYyBmb3VuZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25NZXNzYWdlOicsIG1lc3NhZ2UudG9waWMsICcsIHBheWxvYWQnLCBtZXNzYWdlLnBheWxvYWQpOw0KICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRvcGljLmluY2x1ZGVzKCd0aW1lJykpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tLS0tYnJva2VydGltZSB5eXl5bW1kZCBISE1NU1MgcmVjZWl2ZWQ/LS0tLS0tLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBheWxvYWQubGVuZ3RoID09PSAxNSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcHVtcDEubGFzdFB1bXAxRGF0ZSA9IG1lc3NhZ2UucGF5bG9hZC5zdWJzdHJpbmcoNiwgOCkgKyAnLicgKyBtZXNzYWdlLnBheWxvYWQuc3Vic3RyaW5nKDQsIDYpICsgJy4nICsgbWVzc2FnZS5wYXlsb2FkLnN1YnN0cmluZygyLCA0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHB1bXAxLmxhc3RQdW1wMVRpbWUgPSBtZXNzYWdlLnBheWxvYWQuc3Vic3RyaW5nKDksIDExKSArICc6JyArIG1lc3NhZ2UucGF5bG9hZC5zdWJzdHJpbmcoMTEsIDEzKSArICc6JyArIG1lc3NhZ2UucGF5bG9hZC5zdWJzdHJpbmcoMTMsIDE1KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHB1bXAxLmlQdW1wMVN0YXRlID0gdGhpcy5zdGF0ZU9rDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7IC8vIHdyb25nIHRpbWUgc3RyaW5nDQogICAgICAgICAgICAgICAgICAgICAgICBwdW1wMS5sYXN0UHVtcDFEYXRlID0gZ2VvMGYubm9EYXRlOw0KICAgICAgICAgICAgICAgICAgICAgICAgcHVtcDEubGFzdFB1bXAxVGltZSA9IGdlbzBmLm5vVGltZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAvLyAtLS0tLS1FTkQgYnJva2VydGltZSB5eXl5bW1kZCBISE1NU1MgcmVjZWl2ZWQ/LS0tLS0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIC8vIC0tLS0tLXdvcmsgb24gZGlmZmVyZW50IHB1bXAgdHlwZXMtLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgICAgICAgICBwdW1wMS5pUHVtcDFTdGF0ZSA9IF90aGlzLnN0YXRlTm90T2s7DQogICAgICAgICAgICAgICAgICAgIGlmIChwdW1wMS50eXBlID09PSAnRDEnIHx8IHB1bXAxLnR5cGUgPT09ICdFU1AzMicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFQYXlsb2FkID0gSlNPTi5wYXJzZShtZXNzYWdlLnBheWxvYWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhUGF5bG9hZC5wdW1wZSA9PT0gMCB8fCBhUGF5bG9hZC5wdW1wZSA9PT0gJzAnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdW1wMS5pUHVtcDFTdGF0ZSA9IF90aGlzLnN0YXRlT2ZmOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhUGF5bG9hZC5wdW1wZSA9PT0gMSB8fCBhUGF5bG9hZC5wdW1wZSA9PT0gJzEnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdW1wMS5pUHVtcDFTdGF0ZSA9IF90aGlzLnN0YXRlT247DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVtcDEuc1NlbnNvciA9ICIiICsgYVBheWxvYWQuc3RhdHVzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzMSA9ICIiICsgYVBheWxvYWQud2F0ZXJsZXZlbDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTEgPSBzMS5pbmRleE9mKCd8Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkxID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdW1wMS5zU3RhdHVzID0gczEucmVwbGFjZUFsbCgnIHwgJywgJ3wnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bXAxLnNTdGF0dXMgPSAnbm8gd2F0ZXJsZXZlbCc7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVtcDEuaVB1bXAxU3RhdGUgPSBfdGhpcy5zdGF0ZU5vdE9rOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bXAxLmxhc3RQdW1wMURhdGUgPSAnRVJST1InOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bXAxLmxhc3RQdW1wMVRpbWUgPSAnanNvbic7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uTWVzc2FnZSBlcnJvcj0nLCBlcnJvcik7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKHB1bXAxLnR5cGUgPT09ICdzb21ldGhpbmdfZWxzZScpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4uYWRkIGZ1bmN0aW9uYWxpdHkgZm9yIGFub3RoZXIgc2Vuc29yIGhlcmUuLi4NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikgeyB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IC8vIC0tLS0tLUVORCB3b3JrIG9uIGRpZmZlcmVudCByZXBlYXRlciB0eXBlcy0tLS0tLS0tLS0NCiAgICAgICAgICAgIH0gLy8gLS0tLS0tLS1FTkQgcHVtcDEgdG9waWMgZm91bmQtLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgfSk7DQogICAgfTsNCiAgICBDaVB1bXAxQ29udHJvbGxlci5wcm90b3R5cGUucHVibGlzaENpID0gZnVuY3Rpb24gKHRvcGljLCBwYXlsb2FkKSB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdwdWJsaXNoOicsICctdCAnICsgdG9waWMgKyAnIC1tICcgKyBwYXlsb2FkKQ0KICAgICAgICB0aGlzLnB1Ymxpc2godG9waWMsIHBheWxvYWQsIGZhbHNlLCAwKS5jYXRjaChmdW5jdGlvbiAoZSkgeyBjb25zb2xlLmVycm9yKCdDaVJlcGVhdGVyQ29udHJvbGxlcjogRVJST1I6JywgZSk7IH0pOw0KICAgIH07DQogICAgcmV0dXJuIENpUHVtcDFDb250cm9sbGVyOw0KfShDaUJhc2VDb250cm9sbGVyKSk7DQpleHBvcnQgeyBDaVB1bXAxQ29udHJvbGxlciB9Ow0KZXhwb3J0IHZhciBjaVB1bXAxQ29udHJvbGxlciA9IG5ldyBDaVB1bXAxQ29udHJvbGxlcigpOw0K"},{"version":3,"file":"G:\\work3\\vue\\haus3\\src\\controller\\CiPump1Controller.ts","sourceRoot":"","sources":["G:\\work3\\vue\\haus3\\src\\controller\\CiPump1Controller.ts"],"names":[],"mappings":"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","sourcesContent":["// ______CiPump1Controller.ts____________________khartinger_____\r\n// 2022-10-19: new\r\n// 2023-02-15: change at CiBase (add Geo.ts)\r\nimport { reactive } from 'vue'\r\nimport { Message } from '@/services/CiMqttClient'\r\nimport { CiBaseController, IBase } from './CiBaseController'\r\nimport { geo0f } from '../classes/Geo'\r\n\r\nexport interface Pump1 extends IBase {\r\n  // ---------mandatory-----------------------------------------\r\n  iPump1State: number;\r\n  type: string;\r\n  lastPump1Date: string;\r\n  lastPump1Time: string;\r\n  // ---------optional------------------------------------------\r\n  sSensor?: string;\r\n  sStatus?: string;\r\n  textFooter?: string;\r\n}\r\n\r\nexport class CiPump1Controller extends CiBaseController {\r\n  public pump1s: Array<Pump1> = reactive(\r\n    [\r\n      { // ---pump1---------------------------------------------\r\n        id: 'pump3',\r\n        name: 'Pumpe3-32',\r\n        type: 'ESP32',\r\n        iPump1State: -99,\r\n        sSensor: '-',\r\n        sStatus: 'Status?',\r\n        lastPump1Date: 'Date?',\r\n        lastPump1Time: 'Time?',\r\n        subTopic: 'ip/h/hz0/pumpe/3/ret/status ip/h/hz0/pumpe/3/time',\r\n        pubTopic: ''\r\n      }\r\n    ]\r\n  );\r\n\r\n  // --------------state constants------------------------------\r\n  //  public stateOk = -1;\r\n  public stateOn = -1;\r\n  public stateOff = -2;\r\n  public stateNotOk = -998;\r\n  public stateNoState = -999;\r\n\r\n  // --------------Message for this ci (control/indicator)?-----\r\n  public onMessage (message: Message): void {\r\n    this.pump1s.forEach(pump1 => {\r\n      const aSubTopic = pump1.subTopic.split(' ')\r\n      if (aSubTopic.includes(message.topic)) {\r\n        // --------pump1 topic found ---------------------------\r\n        console.log('onMessage:', message.topic, ', payload', message.payload)\r\n        if (message.topic.includes('time')) {\r\n          // ------brokertime yyyymmdd HHMMSS received?---------\r\n          if (message.payload.length === 15) {\r\n            pump1.lastPump1Date = message.payload.substring(6, 8) + '.' + message.payload.substring(4, 6) + '.' + message.payload.substring(2, 4)\r\n            pump1.lastPump1Time = message.payload.substring(9, 11) + ':' + message.payload.substring(11, 13) + ':' + message.payload.substring(13, 15)\r\n            // pump1.iPump1State = this.stateOk\r\n          } else { // wrong time string\r\n            pump1.lastPump1Date = geo0f.noDate\r\n            pump1.lastPump1Time = geo0f.noTime\r\n          }\r\n          // ------END brokertime yyyymmdd HHMMSS received?-----\r\n        } else {\r\n          // ------work on different pump types-----------------\r\n          pump1.iPump1State = this.stateNotOk\r\n          if (pump1.type === 'D1' || pump1.type === 'ESP32') {\r\n            try {\r\n              const aPayload = JSON.parse(message.payload)\r\n              if (aPayload.pumpe === 0 || aPayload.pumpe === '0') pump1.iPump1State = this.stateOff\r\n              if (aPayload.pumpe === 1 || aPayload.pumpe === '1') pump1.iPump1State = this.stateOn\r\n              pump1.sSensor = `${aPayload.status}`\r\n              const s1 = `${aPayload.waterlevel}`\r\n              const i1 = s1.indexOf('|')\r\n              if (i1 > 0) {\r\n                pump1.sStatus = s1.replaceAll(' | ', '|')\r\n              } else {\r\n                pump1.sStatus = 'no waterlevel'\r\n              }\r\n            } catch (error) {\r\n              pump1.iPump1State = this.stateNotOk\r\n              pump1.lastPump1Date = 'ERROR'\r\n              pump1.lastPump1Time = 'json'\r\n              console.log('onMessage error=', error)\r\n            }\r\n          }\r\n          if (pump1.type === 'something_else') {\r\n            try {\r\n              // ...add functionality for another sensor here...\r\n            } catch (error) { }\r\n          }\r\n        } // ------END work on different repeater types----------\r\n      } // --------END pump1 topic found---------------------\r\n    })\r\n  }\r\n\r\n  public publishCi (topic: string, payload: string): void {\r\n    // console.log('publish:', '-t ' + topic + ' -m ' + payload)\r\n    this.publish(topic, payload, false, 0).catch((e) => { console.error('CiRepeaterController: ERROR:', e) })\r\n  }\r\n}\r\n\r\nexport const ciPump1Controller = new CiPump1Controller()\r\n"]}]}