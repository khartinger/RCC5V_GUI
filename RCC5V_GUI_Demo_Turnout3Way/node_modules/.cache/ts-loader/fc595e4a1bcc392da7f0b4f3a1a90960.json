{"remainingRequest":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js??ref--13-1!G:\\work3\\vue\\haus2\\src\\controller\\CiTextareaController.ts","dependencies":[{"path":"G:\\work3\\vue\\haus2\\src\\controller\\CiTextareaController.ts","mtime":1674497399483},{"path":"G:\\work3\\vue\\haus2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOw0KLy8gX19fX19fQ2lUZXh0YXJlYUNvbnRyb2xsZXIudHNfX19fX19fX19fX19fX19fX19fa2hhcnRpbmdlcl9fX19fDQovLyAyMDIyLTA4LTE0OiBOZXcNCmltcG9ydCB7IHJlYWN0aXZlIH0gZnJvbSAndnVlJzsNCmltcG9ydCB7IENpQmFzZUNvbnRyb2xsZXIgfSBmcm9tICcuL0NpQmFzZUNvbnRyb2xsZXInOw0KdmFyIENpVGV4dGFyZWFDb250cm9sbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgew0KICAgIF9fZXh0ZW5kcyhDaVRleHRhcmVhQ29udHJvbGxlciwgX3N1cGVyKTsNCiAgICBmdW5jdGlvbiBDaVRleHRhcmVhQ29udHJvbGxlcigpIHsNCiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7DQogICAgICAgIF90aGlzLnRleHRhcmVhcyA9IHJlYWN0aXZlKFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogJ200aFdkb2dfYXJlYScsDQogICAgICAgICAgICAgICAgbmFtZTogJ1dhdGNoZG9nIC0gw5xiZXJmw6RsbGlnZSBOYWNocmljaHRlbicsDQogICAgICAgICAgICAgICAgaVRleHRhcmVhU3RhdGU6IDEsDQogICAgICAgICAgICAgICAgcGF5bG9hZDogJ2NsaWNrIHRvIGdldCBpbmZvJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ200aFdkb2cvcmV0L292ZXJkdWUnLA0KICAgICAgICAgICAgICAgIHB1YlRvcGljOiAnbTRoV2RvZy9nZXQnLA0KICAgICAgICAgICAgICAgIHB1YlBheWxvYWQ6ICdvdmVyZHVlJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogJ3dhdHQnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdMZWlzdHVuZycsDQogICAgICAgICAgICAgICAgaVRleHRhcmVhU3RhdGU6IDEsDQogICAgICAgICAgICAgICAgcGF5bG9hZDogJ2NsaWNrIHRvIGdldCBpbmZvJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ2lwL2gvaHUyL3dhdHQvcmV0L3dhdHQnLA0KICAgICAgICAgICAgICAgIHB1YlRvcGljOiAnaXAvaC9odTIvd2F0dC9nZXQnLA0KICAgICAgICAgICAgICAgIHB1YlBheWxvYWQ6ICd3YXR0Jw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogJ2ltZ3N0cm9tJywNCiAgICAgICAgICAgICAgICBuYW1lOiAnQWt0dWFsaXNpZXJlbicsDQogICAgICAgICAgICAgICAgaVRleHRhcmVhU3RhdGU6IDEsDQogICAgICAgICAgICAgICAgcGF5bG9hZDogJycsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICdpcC9oL2h1Mi9zdHJvbS9yZXQvcGhvdG9zJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJ2lwL2gvaHUyL3N0cm9tL2dldCcsDQogICAgICAgICAgICAgICAgcHViUGF5bG9hZDogJ3Bob3RvcycNCiAgICAgICAgICAgIH0NCiAgICAgICAgXSk7DQogICAgICAgIHJldHVybiBfdGhpczsNCiAgICB9DQogICAgLy8gLS0tLS0tLS0tTWVzc2FnZSBmb3IgdGhpcyBjaSAoY29udHJvbC9pbmRpY2F0b3IpPy0tLS0tLS0tLS0NCiAgICBDaVRleHRhcmVhQ29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsNCiAgICAgICAgLy8gLS0tLS0tLXNlYXJjaCBmb3IgdGV4dGFyZWEgdG9waWMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgdGhpcy50ZXh0YXJlYXMuZm9yRWFjaChmdW5jdGlvbiAodGV4dGFyZWEpIHsNCiAgICAgICAgICAgIHZhciBhU3ViVG9waWMgPSB0ZXh0YXJlYS5zdWJUb3BpYy5zcGxpdCgnICcpOw0KICAgICAgICAgICAgaWYgKGFTdWJUb3BpYy5pbmNsdWRlcyhtZXNzYWdlLnRvcGljKSkgew0KICAgICAgICAgICAgICAgIC8vIC0tLXRleHRhcmVhIHRvcGljIGZvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgdmFyIHMxID0gbWVzc2FnZS5wYXlsb2FkOw0KICAgICAgICAgICAgICAgIGlmICh0ZXh0YXJlYS5pZCA9PT0gJ200aFdkb2dfYXJlYScpDQogICAgICAgICAgICAgICAgICAgIHMxID0gczEucmVwbGFjZUFsbCgnLCcsICdcbicpOw0KICAgICAgICAgICAgICAgIGlmICh0ZXh0YXJlYS5pZCA9PT0gJ3dhdHQnKQ0KICAgICAgICAgICAgICAgICAgICBzMSA9IHMxICsgJyBXJzsNCiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5wYXlsb2FkID0gczE7DQogICAgICAgICAgICB9IC8vIEVORCB0ZXh0YXJlYSB0b3BpYyBmb3VuZA0KICAgICAgICB9KTsNCiAgICB9Ow0KICAgIENpVGV4dGFyZWFDb250cm9sbGVyLnByb3RvdHlwZS5wdWJsaXNoQ2kgPSBmdW5jdGlvbiAodG9waWMsIHBheWxvYWQpIHsNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ3B1Ymxpc2g6JywgJy10ICcgKyB0b3BpYyArICcgLW0gJyArIHBheWxvYWQpDQogICAgICAgIHRoaXMucHVibGlzaCh0b3BpYywgcGF5bG9hZCwgZmFsc2UsIDApLmNhdGNoKGZ1bmN0aW9uIChlKSB7IGNvbnNvbGUuZXJyb3IoJ0NpVGV4dGFyZWFDb250cm9sbGVyOiBFUlJPUjonLCBlKTsgfSk7DQogICAgfTsNCiAgICByZXR1cm4gQ2lUZXh0YXJlYUNvbnRyb2xsZXI7DQp9KENpQmFzZUNvbnRyb2xsZXIpKTsNCmV4cG9ydCB7IENpVGV4dGFyZWFDb250cm9sbGVyIH07DQpleHBvcnQgdmFyIGNpVGV4dGFyZWFDb250cm9sbGVyID0gbmV3IENpVGV4dGFyZWFDb250cm9sbGVyKCk7DQo="},{"version":3,"file":"G:\\work3\\vue\\haus2\\src\\controller\\CiTextareaController.ts","sourceRoot":"","sources":["G:\\work3\\vue\\haus2\\src\\controller\\CiTextareaController.ts"],"names":[],"mappings":";AAAA,kEAAkE;AAClE,kBAAkB;AAClB,OAAO,EAAE,QAAQ,EAAE,MAAM,KAAK,CAAA;AAE9B,OAAO,EAAE,gBAAgB,EAAS,MAAM,oBAAoB,CAAA;AAO5D;IAA0C,wCAAgB;IAA1D;QAAA,qEAoDC;QAnDQ,eAAS,GAAoB,QAAQ,CAC1C;YACE;gBACE,EAAE,EAAE,cAAc;gBAClB,IAAI,EAAE,oCAAoC;gBAC1C,cAAc,EAAE,CAAC;gBACjB,OAAO,EAAE,mBAAmB;gBAC5B,QAAQ,EAAE,qBAAqB;gBAC/B,QAAQ,EAAE,aAAa;gBACvB,UAAU,EAAE,SAAS;aACtB;YACD;gBACE,EAAE,EAAE,MAAM;gBACV,IAAI,EAAE,UAAU;gBAChB,cAAc,EAAE,CAAC;gBACjB,OAAO,EAAE,mBAAmB;gBAC5B,QAAQ,EAAE,wBAAwB;gBAClC,QAAQ,EAAE,mBAAmB;gBAC7B,UAAU,EAAE,MAAM;aACnB;YACD;gBACE,EAAE,EAAE,UAAU;gBACd,IAAI,EAAE,eAAe;gBACrB,cAAc,EAAE,CAAC;gBACjB,OAAO,EAAE,EAAE;gBACX,QAAQ,EAAE,2BAA2B;gBACrC,QAAQ,EAAE,oBAAoB;gBAC9B,UAAU,EAAE,QAAQ;aACrB;SACF,CACF,CAAC;;IAqBJ,CAAC;IAnBC,8DAA8D;IACvD,wCAAS,GAAhB,UAAkB,OAAgB;QAChC,8DAA8D;QAC9D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;YAC7B,IAAM,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;YAC9C,IAAI,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBACrC,wDAAwD;gBACxD,IAAI,EAAE,GAAG,OAAO,CAAC,OAAO,CAAA;gBACxB,IAAI,QAAQ,CAAC,EAAE,KAAK,cAAc;oBAAE,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;gBACjE,IAAI,QAAQ,CAAC,EAAE,KAAK,MAAM;oBAAE,EAAE,GAAG,EAAE,GAAG,IAAI,CAAA;gBAC1C,QAAQ,CAAC,OAAO,GAAG,EAAE,CAAA;aACtB,CAAC,2BAA2B;QAC/B,CAAC,CAAC,CAAA;IACJ,CAAC;IAEM,wCAAS,GAAhB,UAAkB,KAAa,EAAE,OAAe;QAC9C,4DAA4D;QAC5D,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC,IAAO,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,CAAC,CAAC,CAAA,CAAC,CAAC,CAAC,CAAA;IAC3G,CAAC;IACH,2BAAC;AAAD,CAAC,AApDD,CAA0C,gBAAgB,GAoDzD;;AAED,MAAM,CAAC,IAAM,oBAAoB,GAAG,IAAI,oBAAoB,EAAE,CAAA","sourcesContent":["// ______CiTextareaController.ts___________________khartinger_____\r\n// 2022-08-14: New\r\nimport { reactive } from 'vue'\r\nimport { Message } from '@/services/CiMqttClient'\r\nimport { CiBaseController, IBase } from './CiBaseController'\r\n\r\nexport interface Textarea extends IBase {\r\n  iTextareaState: number; // 0=no title, 1=name, 2=id, 4=message\r\n  payload: string;\r\n}\r\n\r\nexport class CiTextareaController extends CiBaseController {\r\n  public textareas: Array<Textarea> = reactive(\r\n    [\r\n      {\r\n        id: 'm4hWdog_area',\r\n        name: 'Watchdog - Überfällige Nachrichten',\r\n        iTextareaState: 1, // 1 title=name, 2 title=id, 4 title=payload line 0\r\n        payload: 'click to get info',\r\n        subTopic: 'm4hWdog/ret/overdue',\r\n        pubTopic: 'm4hWdog/get',\r\n        pubPayload: 'overdue'\r\n      },\r\n      {\r\n        id: 'watt',\r\n        name: 'Leistung',\r\n        iTextareaState: 1,\r\n        payload: 'click to get info',\r\n        subTopic: 'ip/h/hu2/watt/ret/watt',\r\n        pubTopic: 'ip/h/hu2/watt/get',\r\n        pubPayload: 'watt'\r\n      },\r\n      {\r\n        id: 'imgstrom',\r\n        name: 'Aktualisieren',\r\n        iTextareaState: 1,\r\n        payload: '',\r\n        subTopic: 'ip/h/hu2/strom/ret/photos',\r\n        pubTopic: 'ip/h/hu2/strom/get',\r\n        pubPayload: 'photos'\r\n      }\r\n    ]\r\n  );\r\n\r\n  // ---------Message for this ci (control/indicator)?----------\r\n  public onMessage (message: Message): void {\r\n    // -------search for textarea topic---------------------------\r\n    this.textareas.forEach(textarea => {\r\n      const aSubTopic = textarea.subTopic.split(' ')\r\n      if (aSubTopic.includes(message.topic)) {\r\n        // ---textarea topic found -----------------------------\r\n        let s1 = message.payload\r\n        if (textarea.id === 'm4hWdog_area') s1 = s1.replaceAll(',', '\\n')\r\n        if (textarea.id === 'watt') s1 = s1 + ' W'\r\n        textarea.payload = s1\r\n      } // END textarea topic found\r\n    })\r\n  }\r\n\r\n  public publishCi (topic: string, payload: string): void {\r\n    // console.log('publish:', '-t ' + topic + ' -m ' + payload)\r\n    this.publish(topic, payload, false, 0).catch((e) => { console.error('CiTextareaController: ERROR:', e) })\r\n  }\r\n}\r\n\r\nexport const ciTextareaController = new CiTextareaController()\r\n"]}]}