{"remainingRequest":"G:\\work3\\vue\\haus2\\node_modules\\thread-loader\\dist\\cjs.js!G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js??ref--13-2!G:\\work3\\vue\\haus2\\src\\controller\\CiMotionController.ts","dependencies":[{"path":"G:\\work3\\vue\\haus2\\src\\controller\\CiMotionController.ts","mtime":1672656882825},{"path":"G:\\work3\\vue\\haus2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOw0KLy8gX19fX19fQ2lNb3Rpb25Db250cm9sbGVyLnRzX19fX19fX19fX19fX19fX19fX2toYXJ0aW5nZXJfX19fXw0KLy8gMjAyMi0wOS0xNDogYWRkIC5jYXRjaCgoZSkgLi4pIHRvIHRoaXMucHVibGlzaA0KLy8gMjAyMy0wMS0wMjogaW1wb3J0IHsgZ2VvMCB9IGNoYW5nZWQNCmltcG9ydCB7IHJlYWN0aXZlIH0gZnJvbSAndnVlJzsNCmltcG9ydCB7IENpQmFzZUNvbnRyb2xsZXIgfSBmcm9tICcuL0NpQmFzZUNvbnRyb2xsZXInOw0KaW1wb3J0IGdlbzAgZnJvbSAnQC9jb21wb25lbnRzL0NpQmFzZS52dWUnOw0KdmFyIENpTW90aW9uQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsNCiAgICBfX2V4dGVuZHMoQ2lNb3Rpb25Db250cm9sbGVyLCBfc3VwZXIpOw0KICAgIGZ1bmN0aW9uIENpTW90aW9uQ29udHJvbGxlcigpIHsNCiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7DQogICAgICAgIF90aGlzLm1vdGlvbnMgPSByZWFjdGl2ZShbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICdiZXdlZ3VuZzEnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdFMTc0NScsDQogICAgICAgICAgICAgICAgbmFtZTogJ0Jld2VnMSBJS0VBJywNCiAgICAgICAgICAgICAgICBpTW90aW9uU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIGJhdHRlcnk6ICctJywNCiAgICAgICAgICAgICAgICBsYXN0TW90aW9uRGF0ZTogJy0tLi0tLi0tJywNCiAgICAgICAgICAgICAgICBsYXN0TW90aW9uVGltZTogJy0tOi0tOi0tJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ3piL2gvdnIvYmV3ZWd1bmcvLTEgemIvaC92ci9iZXdlZ3VuZy8tMS90aW1lJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICdiZXdlZ3VuZzMnLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdSVENHUTExTE0nLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdCZXdlZ3VuZ18zJywNCiAgICAgICAgICAgICAgICBpTW90aW9uU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIGJhdHRlcnk6ICctJywNCiAgICAgICAgICAgICAgICBsYXN0TW90aW9uRGF0ZTogJy0tLi0tLi0tJywNCiAgICAgICAgICAgICAgICBsYXN0TW90aW9uVGltZTogJy0tOi0tOi0tJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ3piL2gvdnIvYmV3ZWd1bmcvLTMgemIvaC92ci9iZXdlZ3VuZy8tMy90aW1lJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICdiZXdlZ3VuZzInLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdSVENHUTExTE0nLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdCZXdlZ3VuZ18yJywNCiAgICAgICAgICAgICAgICBpTW90aW9uU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIGJhdHRlcnk6ICctJywNCiAgICAgICAgICAgICAgICBsYXN0TW90aW9uRGF0ZTogJy0tLi0tLi0tJywNCiAgICAgICAgICAgICAgICBsYXN0TW90aW9uVGltZTogJy0tOi0tOi0tJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ3piL2gveHgvYmV3ZWd1bmcvLTIgemIvaC94eC9iZXdlZ3VuZy8tMi90aW1lJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJycNCiAgICAgICAgICAgIH0NCiAgICAgICAgXSk7DQogICAgICAgIHJldHVybiBfdGhpczsNCiAgICB9DQogICAgLy8gLS0tLS0tLS0tTWVzc2FnZSBmb3IgdGhpcyBjaSAoY29udHJvbC9pbmRpY2F0b3IpPy0tLS0tLS0tLS0NCiAgICBDaU1vdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7DQogICAgICAgIC8vIC0tLS0tLS1zZWFyY2ggZm9yIG1vdGlvbiB0b3BpYy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICB0aGlzLm1vdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobW90aW9uKSB7DQogICAgICAgICAgICB2YXIgYVN1YlRvcGljID0gbW90aW9uLnN1YlRvcGljLnNwbGl0KCcgJyk7DQogICAgICAgICAgICBpZiAoYVN1YlRvcGljLmluY2x1ZGVzKG1lc3NhZ2UudG9waWMpKSB7DQogICAgICAgICAgICAgICAgLy8gLS0tbW90aW9uIHRvcGljIGZvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50b3BpYy5pbmNsdWRlcygndGltZScpKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnBheWxvYWQubGVuZ3RoID09PSAxNSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgbW90aW9uLmxhc3RNb3Rpb25EYXRlID0gbWVzc2FnZS5wYXlsb2FkLnN1YnN0cmluZyg2LCA4KSArICcuJyArIG1lc3NhZ2UucGF5bG9hZC5zdWJzdHJpbmcoNCwgNikgKyAnLicgKyBtZXNzYWdlLnBheWxvYWQuc3Vic3RyaW5nKDIsIDQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgbW90aW9uLmxhc3RNb3Rpb25UaW1lID0gbWVzc2FnZS5wYXlsb2FkLnN1YnN0cmluZyg5LCAxMSkgKyAnOicgKyBtZXNzYWdlLnBheWxvYWQuc3Vic3RyaW5nKDExLCAxMykgKyAnOicgKyBtZXNzYWdlLnBheWxvYWQuc3Vic3RyaW5nKDEzLCAxNSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtb3Rpb24ubGFzdE1vdGlvbkRhdGUgPSBnZW8wLm5vRGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vdGlvbi5sYXN0TW90aW9uVGltZSA9IGdlbzAubm9UaW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgeyAvLyAtbW90aW9uIGluZm8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgICAgICAgICBpZiAobW90aW9uLnR5cGUgPT09ICdSVENHUTExTE0nIHx8IG1vdGlvbi50eXBlID09PSAnRTE3NDUnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYVBheWxvYWQgPSBKU09OLnBhcnNlKG1lc3NhZ2UucGF5bG9hZCk7DQogICAgICAgICAgICAgICAgICAgICAgICBtb3Rpb24uaU1vdGlvblN0YXRlID0gLTE7DQogICAgICAgICAgICAgICAgICAgICAgICBtb3Rpb24uYmF0dGVyeSA9ICIiICsgYVBheWxvYWQuYmF0dGVyeTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhUGF5bG9hZC5vY2N1cGFuY3kgPT09IHRydWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW90aW9uLmlNb3Rpb25TdGF0ZSA9IDE7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYVBheWxvYWQub2NjdXBhbmN5ID09PSAndHJ1ZScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW90aW9uLmlNb3Rpb25TdGF0ZSA9IDE7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYVBheWxvYWQub2NjdXBhbmN5ID09PSBmYWxzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3Rpb24uaU1vdGlvblN0YXRlID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhUGF5bG9hZC5vY2N1cGFuY3kgPT09ICdmYWxzZScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW90aW9uLmlNb3Rpb25TdGF0ZSA9IDA7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKG1vdGlvbi50eXBlID09PSAnRDEnKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdGlvbi5pTW90aW9uU3RhdGUgPCAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtb3Rpb24ubGFzdE1vdGlvbkRhdGUgPSBnZW8wLm5vRGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1vdGlvbi5sYXN0TW90aW9uVGltZSA9IGdlbzAubm9UaW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSAvLyBFTkQgbW90aW9uIHRvcGljIGZvdW5kDQogICAgICAgIH0pOw0KICAgIH07DQogICAgQ2lNb3Rpb25Db250cm9sbGVyLnByb3RvdHlwZS5wdWJsaXNoQ2kgPSBmdW5jdGlvbiAodG9waWMsIHBheWxvYWQpIHsNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ3B1Ymxpc2g6JywgJy10ICcgKyB0b3BpYyArICcgLW0gJyArIHBheWxvYWQpDQogICAgICAgIHRoaXMucHVibGlzaCh0b3BpYywgcGF5bG9hZCwgZmFsc2UsIDApLmNhdGNoKGZ1bmN0aW9uIChlKSB7IGNvbnNvbGUuZXJyb3IoJ0NpTW90aW9uQ29udHJvbGxlcjogRVJST1I6JywgZSk7IH0pOw0KICAgIH07DQogICAgcmV0dXJuIENpTW90aW9uQ29udHJvbGxlcjsNCn0oQ2lCYXNlQ29udHJvbGxlcikpOw0KZXhwb3J0IHsgQ2lNb3Rpb25Db250cm9sbGVyIH07DQpleHBvcnQgdmFyIGNpTW90aW9uQ29udHJvbGxlciA9IG5ldyBDaU1vdGlvbkNvbnRyb2xsZXIoKTsNCg=="},{"version":3,"file":"G:\\work3\\vue\\haus2\\src\\controller\\CiMotionController.ts","sourceRoot":"","sources":["G:\\work3\\vue\\haus2\\src\\controller\\CiMotionController.ts"],"names":[],"mappings":"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","sourcesContent":["// ______CiMotionController.ts___________________khartinger_____\r\n// 2022-09-14: add .catch((e) ..) to this.publish\r\n// 2023-01-02: import { geo0 } changed\r\nimport { reactive } from 'vue'\r\nimport { Message } from '@/services/CiMqttClient'\r\nimport { CiBaseController, IBase } from './CiBaseController'\r\nimport geo0 from '@/components/CiBase.vue'\r\n\r\nexport interface Motion extends IBase {\r\n  type: string;\r\n  iMotionState: number;\r\n  battery?: string;\r\n  text5?: string;\r\n  lastMotionDate: string;\r\n  lastMotionTime: string;\r\n}\r\n\r\nexport class CiMotionController extends CiBaseController {\r\n  public motions: Array<Motion> = reactive(\r\n    [\r\n      { // Erdgeschoss: Bereich 1, Vorraum\r\n        id: 'bewegung1',\r\n        type: 'E1745', // IKEA\r\n        name: 'Beweg1 IKEA',\r\n        iMotionState: -1,\r\n        battery: '-',\r\n        lastMotionDate: '--.--.--',\r\n        lastMotionTime: '--:--:--',\r\n        subTopic: 'zb/h/vr/bewegung/-1 zb/h/vr/bewegung/-1/time',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 1, Vorraum\r\n        id: 'bewegung3',\r\n        type: 'RTCGQ11LM', // Aqara 'zb',\r\n        name: 'Bewegung_3',\r\n        iMotionState: -1,\r\n        battery: '-',\r\n        lastMotionDate: '--.--.--',\r\n        lastMotionTime: '--:--:--',\r\n        subTopic: 'zb/h/vr/bewegung/-3 zb/h/vr/bewegung/-3/time',\r\n        pubTopic: ''\r\n      },\r\n      { // motion 2: TEST  Arbeitszimmer\r\n        id: 'bewegung2',\r\n        type: 'RTCGQ11LM', // Aqara 'zb',\r\n        name: 'Bewegung_2',\r\n        iMotionState: -1,\r\n        battery: '-',\r\n        lastMotionDate: '--.--.--',\r\n        lastMotionTime: '--:--:--',\r\n        subTopic: 'zb/h/xx/bewegung/-2 zb/h/xx/bewegung/-2/time',\r\n        pubTopic: ''\r\n      }\r\n    ]\r\n  );\r\n\r\n  // ---------Message for this ci (control/indicator)?----------\r\n  public onMessage (message: Message): void {\r\n    // -------search for motion topic---------------------------\r\n    this.motions.forEach(motion => {\r\n      const aSubTopic = motion.subTopic.split(' ')\r\n      if (aSubTopic.includes(message.topic)) {\r\n        // ---motion topic found -------------------------------\r\n        if (message.topic.includes('time')) {\r\n          if (message.payload.length === 15) {\r\n            motion.lastMotionDate = message.payload.substring(6, 8) + '.' + message.payload.substring(4, 6) + '.' + message.payload.substring(2, 4)\r\n            motion.lastMotionTime = message.payload.substring(9, 11) + ':' + message.payload.substring(11, 13) + ':' + message.payload.substring(13, 15)\r\n          } else {\r\n            motion.lastMotionDate = geo0.noDate\r\n            motion.lastMotionTime = geo0.noTime\r\n          }\r\n        } else { // -motion info--------------------------------\r\n          if (motion.type === 'RTCGQ11LM' || motion.type === 'E1745') {\r\n            const aPayload = JSON.parse(message.payload)\r\n            motion.iMotionState = -1\r\n            motion.battery = `${aPayload.battery}`\r\n            if (aPayload.occupancy === true) motion.iMotionState = 1\r\n            if (aPayload.occupancy === 'true') motion.iMotionState = 1\r\n            if (aPayload.occupancy === false) motion.iMotionState = 0\r\n            if (aPayload.occupancy === 'false') motion.iMotionState = 0\r\n          }\r\n          // if (motion.type === 'D1') {\r\n          // }\r\n          if (motion.iMotionState < 0) {\r\n            motion.lastMotionDate = geo0.noDate\r\n            motion.lastMotionTime = geo0.noTime\r\n          }\r\n        }\r\n      } // END motion topic found\r\n    })\r\n  }\r\n\r\n  public publishCi (topic: string, payload: string): void {\r\n    // console.log('publish:', '-t ' + topic + ' -m ' + payload)\r\n    this.publish(topic, payload, false, 0).catch((e) => { console.error('CiMotionController: ERROR:', e) })\r\n  }\r\n}\r\n\r\nexport const ciMotionController = new CiMotionController()\r\n"]}]}