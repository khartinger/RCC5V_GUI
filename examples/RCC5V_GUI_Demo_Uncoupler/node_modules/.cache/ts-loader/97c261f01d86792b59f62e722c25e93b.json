{"remainingRequest":"G:\\work3\\vue\\haus2\\node_modules\\thread-loader\\dist\\cjs.js!G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js??ref--13-2!G:\\work3\\vue\\haus2\\src\\controller\\CiTimeDateController.ts","dependencies":[{"path":"G:\\work3\\vue\\haus2\\src\\controller\\CiTimeDateController.ts","mtime":1672656982446},{"path":"G:\\work3\\vue\\haus2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOw0KaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgQ2lCYXNlQ29udHJvbGxlciB9IGZyb20gJy4vQ2lCYXNlQ29udHJvbGxlcic7DQp2YXIgQ2lUaW1lRGF0ZUNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7DQogICAgX19leHRlbmRzKENpVGltZURhdGVDb250cm9sbGVyLCBfc3VwZXIpOw0KICAgIGZ1bmN0aW9uIENpVGltZURhdGVDb250cm9sbGVyKCkgew0KICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsNCiAgICAgICAgX3RoaXMudGltZURhdGVzID0gcmVhY3RpdmUoWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAndGltZURhdGVfMScsDQogICAgICAgICAgICAgICAgbmFtZTogJ1RpbWVEYXRlXzEnLA0KICAgICAgICAgICAgICAgIGlUaW1lRGF0ZVN0YXRlOiAtMSwNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ2NpL3RpbWVEYXRlL3NldCcsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9DQogICAgICAgIF0pOw0KICAgICAgICByZXR1cm4gX3RoaXM7DQogICAgfQ0KICAgIC8vIGdlbyA9IG5ldyBHZW8oMCwgMCk7DQogICAgLy8gLS0tLS0tLS0tTWVzc2FnZSBmb3IgdGhpcyBjaSAoY29udHJvbC9pbmRpY2F0b3IpPy0tLS0tLS0tLS0NCiAgICBDaVRpbWVEYXRlQ29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsNCiAgICAgICAgLy8gLS0tLS0tLXNlYXJjaCBmb3IgdGltZURhdGUgdG9waWMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgdGhpcy50aW1lRGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAodGltZURhdGUpIHsNCiAgICAgICAgICAgIHZhciBhU3ViVG9waWMgPSB0aW1lRGF0ZS5zdWJUb3BpYy5zcGxpdCgnICcpOw0KICAgICAgICAgICAgaWYgKGFTdWJUb3BpYy5pbmNsdWRlcyhtZXNzYWdlLnRvcGljKSkgew0KICAgICAgICAgICAgICAgIC8vIC0tLXRpbWVEYXRlIHRvcGljIGZvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICAvLyAuLlRvRG8uLg0KICAgICAgICAgICAgfSAvLyBFTkQgdGltZURhdGUgdG9waWMgZm91bmQNCiAgICAgICAgfSk7DQogICAgfTsNCiAgICBDaVRpbWVEYXRlQ29udHJvbGxlci5wcm90b3R5cGUucHVibGlzaENpID0gZnVuY3Rpb24gKHRvcGljLCBwYXlsb2FkKSB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdwdWJsaXNoOicsICctdCAnICsgdG9waWMgKyAnIC1tICcgKyBwYXlsb2FkKQ0KICAgICAgICB0aGlzLnB1Ymxpc2godG9waWMsIHBheWxvYWQsIGZhbHNlLCAwKS5jYXRjaChmdW5jdGlvbiAoZSkgeyBjb25zb2xlLmVycm9yKCdDaVRpbWVEYXRlQ29udHJvbGxlcjogRVJST1I6JywgZSk7IH0pOw0KICAgIH07DQogICAgcmV0dXJuIENpVGltZURhdGVDb250cm9sbGVyOw0KfShDaUJhc2VDb250cm9sbGVyKSk7DQpleHBvcnQgeyBDaVRpbWVEYXRlQ29udHJvbGxlciB9Ow0KZXhwb3J0IHZhciBjaVRpbWVEYXRlQ29udHJvbGxlciA9IG5ldyBDaVRpbWVEYXRlQ29udHJvbGxlcigpOw0K"},{"version":3,"file":"G:\\work3\\vue\\haus2\\src\\controller\\CiTimeDateController.ts","sourceRoot":"","sources":["G:\\work3\\vue\\haus2\\src\\controller\\CiTimeDateController.ts"],"names":[],"mappings":";AAGA,OAAO,EAAE,QAAQ,EAAE,MAAM,KAAK,CAAA;AAC9B,OAAO,EAAE,gBAAgB,EAAS,MAAM,oBAAoB,CAAA;AAM5D;IAA0C,wCAAgB;IAA1D;QAAA,qEA+BC;QA9BQ,eAAS,GAAoB,QAAQ,CAC1C;YACE;gBACE,EAAE,EAAE,YAAY;gBAChB,IAAI,EAAE,YAAY;gBAClB,cAAc,EAAE,CAAC,CAAC;gBAClB,QAAQ,EAAE,iBAAiB;gBAC3B,QAAQ,EAAE,EAAE;aACb;SACF,CACF,CAAC;;IAoBJ,CAAC;IAlBC,uBAAuB;IAEvB,8DAA8D;IACvD,wCAAS,GAAhB,UAAkB,OAAgB;QAChC,8DAA8D;QAC9D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAA,QAAQ;YAC7B,IAAM,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;YAC9C,IAAI,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBACrC,0DAA0D;gBAC1D,WAAW;aACZ,CAAC,2BAA2B;QAC/B,CAAC,CAAC,CAAA;IACJ,CAAC;IAEM,wCAAS,GAAhB,UAAkB,KAAa,EAAE,OAAe;QAC9C,4DAA4D;QAC5D,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC,IAAO,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,CAAC,CAAC,CAAA,CAAC,CAAC,CAAC,CAAA;IAC3G,CAAC;IACH,2BAAC;AAAD,CAAC,AA/BD,CAA0C,gBAAgB,GA+BzD;;AAED,MAAM,CAAC,IAAM,oBAAoB,GAAG,IAAI,oBAAoB,EAAE,CAAA","sourcesContent":["// ______CiTimeDateLController.ts________________khartinger_____\r\n// 2022-09-14: add .catch((e) ..) to this.publish\r\nimport { Message } from '@/services/CiMqttClient'\r\nimport { reactive } from 'vue'\r\nimport { CiBaseController, IBase } from './CiBaseController'\r\n\r\nexport interface TimeDate extends IBase {\r\n  iTimeDateState: number;\r\n}\r\n\r\nexport class CiTimeDateController extends CiBaseController {\r\n  public timeDates: Array<TimeDate> = reactive(\r\n    [\r\n      {\r\n        id: 'timeDate_1',\r\n        name: 'TimeDate_1',\r\n        iTimeDateState: -1,\r\n        subTopic: 'ci/timeDate/set',\r\n        pubTopic: ''\r\n      }\r\n    ]\r\n  );\r\n\r\n  // geo = new Geo(0, 0);\r\n\r\n  // ---------Message for this ci (control/indicator)?----------\r\n  public onMessage (message: Message): void {\r\n    // -------search for timeDate topic---------------------------\r\n    this.timeDates.forEach(timeDate => {\r\n      const aSubTopic = timeDate.subTopic.split(' ')\r\n      if (aSubTopic.includes(message.topic)) {\r\n        // ---timeDate topic found -------------------------------\r\n        // ..ToDo..\r\n      } // END timeDate topic found\r\n    })\r\n  }\r\n\r\n  public publishCi (topic: string, payload: string): void {\r\n    // console.log('publish:', '-t ' + topic + ' -m ' + payload)\r\n    this.publish(topic, payload, false, 0).catch((e) => { console.error('CiTimeDateController: ERROR:', e) })\r\n  }\r\n}\r\n\r\nexport const ciTimeDateController = new CiTimeDateController()\r\n"]}]}