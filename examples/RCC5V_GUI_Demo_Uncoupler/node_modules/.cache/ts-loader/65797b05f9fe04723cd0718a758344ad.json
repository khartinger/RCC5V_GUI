{"remainingRequest":"G:\\work3\\vue\\haus3\\node_modules\\thread-loader\\dist\\cjs.js!G:\\work3\\vue\\haus3\\node_modules\\ts-loader\\index.js??ref--13-2!G:\\work3\\vue\\haus3\\src\\controller\\CiDoor1Controller.ts","dependencies":[{"path":"G:\\work3\\vue\\haus3\\src\\controller\\CiDoor1Controller.ts","mtime":1683135189165},{"path":"G:\\work3\\vue\\haus3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus3\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus3\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOw0KLy8gX19fX19fQ2lEb29yMUNvbnRyb2xsZXIudHNfX19fX19fX19fX19fX19fX19fX2toYXJ0aW5nZXJfX19fXw0KLy8gMjAyMi0wMS0wODogbmV3DQovLyAyMDIzLTAyLTE4OiBjaGFuZ2UgYXQgQ2lCYXNlIChhZGQgR2VvLnRzKQ0KaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgQ2lCYXNlQ29udHJvbGxlciB9IGZyb20gJy4vQ2lCYXNlQ29udHJvbGxlcic7DQp2YXIgQ2lEb29yMUNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7DQogICAgX19leHRlbmRzKENpRG9vcjFDb250cm9sbGVyLCBfc3VwZXIpOw0KICAgIGZ1bmN0aW9uIENpRG9vcjFDb250cm9sbGVyKCkgew0KICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsNCiAgICAgICAgX3RoaXMuZG9vcjFzID0gcmVhY3RpdmUoWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAnZG9vcl92cjFfMScsDQogICAgICAgICAgICAgICAgbmFtZTogJ0VpbmdhbmcgPycsDQogICAgICAgICAgICAgICAgaURvb3IxU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIHR5cGU6ICd6YicsDQogICAgICAgICAgICAgICAgYmF0dGVyeTogJy0nLA0KICAgICAgICAgICAgICAgIHN1YlRvcGljOiAnemIvaC92ci90dWVyZS8tMScsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAnZG9vcl92cjFfMicsDQogICAgICAgICAgICAgICAgbmFtZTogJ0hpbnRlbiA/JywNCiAgICAgICAgICAgICAgICBpRG9vcjFTdGF0ZTogLTEsDQogICAgICAgICAgICAgICAgdHlwZTogJ3piJywNCiAgICAgICAgICAgICAgICBiYXR0ZXJ5OiAnLScsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICd6Yi9oL3ZyL3R1ZXJlLy0yJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICdkb29yX3ZyMV9hcjFfMXpiJywNCiAgICAgICAgICAgICAgICBuYW1lOiAnemInLA0KICAgICAgICAgICAgICAgIGlEb29yMVN0YXRlOiAtMSwNCiAgICAgICAgICAgICAgICB0eXBlOiAnemInLA0KICAgICAgICAgICAgICAgIGJhdHRlcnk6ICctJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ3piL2gvYXovdHVlcmUvLTEnLA0KICAgICAgICAgICAgICAgIHB1YlRvcGljOiAnJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogJ2Rvb3JfdnIxX2FyMV8xZDEnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdEMScsDQogICAgICAgICAgICAgICAgaURvb3IxU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdEMScsDQogICAgICAgICAgICAgICAgYmF0dGVyeTogJy0nLA0KICAgICAgICAgICAgICAgIC8vIHN1YlRvcGljOiAnZTEvYXIvdHVlcmUvMS9yZXQvc3RhdHVzIGUxL2FyL3R1ZXJlLzEvcmV0L3ZvbHRhZ2UnLA0KICAgICAgICAgICAgICAgIHN1YlRvcGljOiAnaXAvaC9hcjEvdHVlcmUvLTEvcmV0L3N0YXR1cyBpcC9oL2FyMS90dWVyZS8tMS9yZXQvdm9sdCcsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAnZG9vcl92cjFfd3oxXzJ6YicsDQogICAgICAgICAgICAgICAgbmFtZTogJ1dvaG56ID8nLA0KICAgICAgICAgICAgICAgIGlEb29yMVN0YXRlOiAtMSwNCiAgICAgICAgICAgICAgICB0eXBlOiAnemInLA0KICAgICAgICAgICAgICAgIGJhdHRlcnk6ICctJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ3piL2gvd3ovdHVlcmUvLTEnLA0KICAgICAgICAgICAgICAgIHB1YlRvcGljOiAnJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogJ2Rvb3JfdnIxX3d6MV8xRDEnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdEMScsDQogICAgICAgICAgICAgICAgaURvb3IxU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIHR5cGU6ICdEMScsDQogICAgICAgICAgICAgICAgYmF0dGVyeTogJy0nLA0KICAgICAgICAgICAgICAgIC8vIHN1YlRvcGljOiAnZTEvd28vdHVlcmUvMS9yZXQvc3RhdHVzIGUxL3dvL3R1ZXJlLzEvcmV0L3ZvbHRhZ2UnLA0KICAgICAgICAgICAgICAgIHN1YlRvcGljOiAnaXAvaC93ejEvdHVlcmUvLTEvcmV0L3N0YXR1cyBpcC9oL3d6MS90dWVyZS8tMS9yZXQvdm9sdCcsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAnZG9vcl9kdTJfMScsDQogICAgICAgICAgICAgICAgbmFtZTogJ1TDvHJlID8nLA0KICAgICAgICAgICAgICAgIGlEb29yMVN0YXRlOiAtMSwNCiAgICAgICAgICAgICAgICB0eXBlOiAnaHV0JywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ2lwL2gvaHUyL2h1ZXR0ZS9yZXQvc3RhdHVzJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJycNCiAgICAgICAgICAgIH0NCiAgICAgICAgXSk7DQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tc3RhdGUgY29uc3RhbnRzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgIF90aGlzLnN0YXRlT3BlbiA9IC0xOw0KICAgICAgICBfdGhpcy5zdGF0ZUNsb3NlID0gLTI7DQogICAgICAgIF90aGlzLnN0YXRlTG9jayA9IC0zOw0KICAgICAgICBfdGhpcy5zdGF0ZU5vdE9rID0gLTk5ODsNCiAgICAgICAgX3RoaXMuc3RhdGVOb1N0YXRlID0gLTk5OTsNCiAgICAgICAgcmV0dXJuIF90aGlzOw0KICAgIH0NCiAgICBDaURvb3IxQ29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsNCiAgICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgICAgdGhpcy5kb29yMXMuZm9yRWFjaChmdW5jdGlvbiAoZG9vcjEpIHsNCiAgICAgICAgICAgIHZhciBhU3ViVG9waWMgPSBkb29yMS5zdWJUb3BpYy5zcGxpdCgnICcpOw0KICAgICAgICAgICAgaWYgKGFTdWJUb3BpYy5pbmNsdWRlcyhtZXNzYWdlLnRvcGljKSkgew0KICAgICAgICAgICAgICAgIC8vIC0tLWRvb3IxIHRvcGljIGZvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgaWYgKGRvb3IxLnR5cGUgPT09ICd6YicpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gLS0tZG9vciB0eXBlIDEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhUGF5bG9hZCA9IEpTT04ucGFyc2UobWVzc2FnZS5wYXlsb2FkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IxLmJhdHRlcnkgPSAiIiArIGFQYXlsb2FkLmJhdHRlcnk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9vcnN0YXRlXyA9IFN0cmluZyhhUGF5bG9hZC5jb250YWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb29yc3RhdGVfID09PSAndHJ1ZScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9vcjEuaURvb3IxU3RhdGUgPSBfdGhpcy5zdGF0ZUNsb3NlOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvb3JzdGF0ZV8gPT09ICdmYWxzZScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IxLmlEb29yMVN0YXRlID0gX3RoaXMuc3RhdGVPcGVuOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9vcjEuaURvb3IxU3RhdGUgPSBfdGhpcy5zdGF0ZU5vdE9rOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikgeyB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChkb29yMS50eXBlID09PSAnRDEnKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIC0tLWRvb3IgdHlwZSAyLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRvcGljLmluY2x1ZGVzKCdzdGF0dXMnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtZXNzYWdlLnBheWxvYWQgPT09ICcxJykgfHwgKG1lc3NhZ2UucGF5bG9hZCA9PT0gJ29uJykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9vcjEuaURvb3IxU3RhdGUgPSBfdGhpcy5zdGF0ZU9wZW47DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG1lc3NhZ2UucGF5bG9hZCA9PT0gJzAnKSB8fCAobWVzc2FnZS5wYXlsb2FkID09PSAnb2ZmJykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IxLmlEb29yMVN0YXRlID0gX3RoaXMuc3RhdGVDbG9zZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UucGF5bG9hZCA9PT0gJy0xJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IxLmlEb29yMVN0YXRlID0gX3RoaXMuc3RhdGVMb2NrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb29yMS5pRG9vcjFTdGF0ZSA9IF90aGlzLnN0YXRlTm90T2s7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRvcGljLmluY2x1ZGVzKCd2b2x0JykgfHwgbWVzc2FnZS50b3BpYy5pbmNsdWRlcygndm9sdGFnZScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb29yMS5iYXR0ZXJ5ID0gIiIgKyBtZXNzYWdlLnBheWxvYWQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gLS0tZG9vciB0eXBlIDMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICBpZiAoZG9vcjEudHlwZSA9PT0gJ2h1dCcpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gLWRvb3Igc3RhdGUgZnJvbSBodWV0dGUgLSBzdGF0dXMtLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdDaURvb3JDb250cm9sbGVyLm9uTWVzc2FnZSAtdCAnLCBtZXNzYWdlLnRvcGljICsgJyAtbSAnICsgbWVzc2FnZS5wYXlsb2FkKQ0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFQYXlsb2FkID0gSlNPTi5wYXJzZShtZXNzYWdlLnBheWxvYWQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZG9vcjEuaURvb3IxU3RhdGUgPSBfdGhpcy5zdGF0ZU5vdE9rOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFQYXlsb2FkLkRvb3IgPT09ICdvZmZlbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9vcjEuaURvb3IxU3RhdGUgPSBfdGhpcy5zdGF0ZU9wZW47DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYVBheWxvYWQuRG9vciA9PT0gJ3p1JykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb29yMS5pRG9vcjFTdGF0ZSA9IF90aGlzLnN0YXRlQ2xvc2U7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYVBheWxvYWQuRG9vciA9PT0gJ3ZlcnNwZXJydCcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9vcjEuaURvb3IxU3RhdGUgPSBfdGhpcy5zdGF0ZUxvY2s7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gLS0tZG9vciB0eXBlIDQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICBpZiAoZG9vcjEudHlwZSA9PT0gJ3NvbWV0aGluZ19lbHNlJykgew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4uYWRkIGZ1bmN0aW9uYWxpdHkgZm9yIGFub3RoZXIgc2Vuc29yIGhlcmUuLi4NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHsgfQ0KICAgICAgICAgICAgICAgIH0gLy8gLS0tLS0tRU5EIHdvcmsgb24gZGlmZmVyZW50IGRvb3IxIHR5cGVzLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgLy8gLS0tRU5EIGRvb3IxIHRvcGljIGZvdW5kIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsNCiAgICBDaURvb3IxQ29udHJvbGxlci5wcm90b3R5cGUucHVibGlzaENpID0gZnVuY3Rpb24gKHRvcGljLCBwYXlsb2FkKSB7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdDaURvb3IxQ29udHJvbGxlcjpwdWJsaXNoQ2k6JywgJy10ICcgKyB0b3BpYyArICcgLW0gJyArIHBheWxvYWQpDQogICAgICAgIHRoaXMucHVibGlzaCh0b3BpYywgcGF5bG9hZCwgZmFsc2UsIDApLmNhdGNoKGZ1bmN0aW9uIChlKSB7IGNvbnNvbGUuZXJyb3IoJ0NpRG9vcjFDb250cm9sbGVyOiBFUlJPUjonLCBlKTsgfSk7DQogICAgfTsNCiAgICByZXR1cm4gQ2lEb29yMUNvbnRyb2xsZXI7DQp9KENpQmFzZUNvbnRyb2xsZXIpKTsNCmV4cG9ydCB7IENpRG9vcjFDb250cm9sbGVyIH07DQpleHBvcnQgdmFyIGNpRG9vcjFDb250cm9sbGVyID0gbmV3IENpRG9vcjFDb250cm9sbGVyKCk7DQo="},{"version":3,"file":"G:\\work3\\vue\\haus3\\src\\controller\\CiDoor1Controller.ts","sourceRoot":"","sources":["G:\\work3\\vue\\haus3\\src\\controller\\CiDoor1Controller.ts"],"names":[],"mappings":"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","sourcesContent":["// ______CiDoor1Controller.ts____________________khartinger_____\r\n// 2022-01-08: new\r\n// 2023-02-18: change at CiBase (add Geo.ts)\r\nimport { reactive } from 'vue'\r\nimport { Message } from '@/services/CiMqttClient'\r\nimport { CiBaseController, IBase } from './CiBaseController'\r\n\r\nexport interface Door1 extends IBase {\r\n  // ---------mandatory-----------------------------------------\r\n  iDoor1State: number;\r\n  type: string;\r\n  // ---------optional------------------------------------------\r\n  battery?: string;\r\n  textHeader?: string;\r\n  textFooter?: string;\r\n}\r\n\r\nexport class CiDoor1Controller extends CiBaseController {\r\n  public door1s: Array<Door1> = reactive(\r\n    [\r\n      { // ---vr1: Vorraum Eingangstuere vorne------------------\r\n        id: 'door_vr1_1',\r\n        name: 'Eingang ?',\r\n        iDoor1State: -1, // -1=open, -2=close, -3=lock\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/vr/tuere/-1',\r\n        pubTopic: ''\r\n      },\r\n      { // ---vr1: Vorraum Eingangstuere hinten-----------------\r\n        id: 'door_vr1_2',\r\n        name: 'Hinten ?',\r\n        iDoor1State: -1, // -1=open, -2=close, -3=lock\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/vr/tuere/-2',\r\n        pubTopic: ''\r\n      },\r\n      { // ---vr1-ar1: Altbau/Arbeitszimmer zigbee-Version------\r\n        id: 'door_vr1_ar1_1zb',\r\n        name: 'zb',\r\n        iDoor1State: -1,\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/az/tuere/-1',\r\n        pubTopic: ''\r\n      },\r\n      { // ---vr1-ar1: Altbau/Arbeitszimmer D1mini-Version------\r\n        id: 'door_vr1_ar1_1d1',\r\n        name: 'D1',\r\n        iDoor1State: -1,\r\n        type: 'D1',\r\n        battery: '-',\r\n        // subTopic: 'e1/ar/tuere/1/ret/status e1/ar/tuere/1/ret/voltage',\r\n        subTopic: 'ip/h/ar1/tuere/-1/ret/status ip/h/ar1/tuere/-1/ret/volt',\r\n        pubTopic: ''\r\n      },\r\n      { // ---Erdgeschoss: Wohnzimmer(-Vorraum)-----------------\r\n        id: 'door_vr1_wz1_2zb',\r\n        name: 'Wohnz ?',\r\n        iDoor1State: -1,\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/wz/tuere/-1',\r\n        pubTopic: ''\r\n      },\r\n      { // ---Erdgeschoss: Wohnzimmer(-Vorraum)-----------------\r\n        id: 'door_vr1_wz1_1D1',\r\n        name: 'D1',\r\n        iDoor1State: -1,\r\n        type: 'D1',\r\n        battery: '-',\r\n        // subTopic: 'e1/wo/tuere/1/ret/status e1/wo/tuere/1/ret/voltage',\r\n        subTopic: 'ip/h/wz1/tuere/-1/ret/status ip/h/wz1/tuere/-1/ret/volt',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 3, Huette\r\n        id: 'door_du2_1',\r\n        name: 'TÃ¼re ?',\r\n        iDoor1State: -1,\r\n        type: 'hut',\r\n        subTopic: 'ip/h/hu2/huette/ret/status',\r\n        pubTopic: ''\r\n      }\r\n    ]\r\n  );\r\n\r\n  // --------------state constants------------------------------\r\n  public stateOpen = -1;\r\n  public stateClose = -2;\r\n  public stateLock = -3;\r\n  public stateNotOk = -998;\r\n  public stateNoState = -999;\r\n\r\n  public onMessage (message: Message): void {\r\n    this.door1s.forEach(door1 => {\r\n      const aSubTopic = door1.subTopic.split(' ')\r\n      if (aSubTopic.includes(message.topic)) {\r\n        // ---door1 topic found --------------------------------\r\n        if (door1.type === 'zb') {\r\n        // ---door type 1---------------------------------------\r\n          try {\r\n            const aPayload = JSON.parse(message.payload)\r\n            door1.battery = `${aPayload.battery}`\r\n            const doorstate_ = String(aPayload.contact)\r\n            if (doorstate_ === 'true') door1.iDoor1State = this.stateClose\r\n            else {\r\n              if (doorstate_ === 'false') door1.iDoor1State = this.stateOpen\r\n              else door1.iDoor1State = this.stateNotOk\r\n            }\r\n          } catch (error) { }\r\n        }\r\n        if (door1.type === 'D1') {\r\n        // ---door type 2---------------------------------------\r\n          if (message.topic.includes('status')) {\r\n            if ((message.payload === '1') || (message.payload === 'on')) door1.iDoor1State = this.stateOpen\r\n            else {\r\n              if ((message.payload === '0') || (message.payload === 'off')) door1.iDoor1State = this.stateClose\r\n              else {\r\n                if (message.payload === '-1') door1.iDoor1State = this.stateLock\r\n                else door1.iDoor1State = this.stateNotOk\r\n              }\r\n            }\r\n          }\r\n          if (message.topic.includes('volt') || message.topic.includes('voltage')) {\r\n            door1.battery = `${message.payload}`\r\n          }\r\n        }\r\n        // ---door type 3---------------------------------------\r\n        if (door1.type === 'hut') {\r\n          // -door state from huette - status-------------------\r\n          // console.log('CiDoorController.onMessage -t ', message.topic + ' -m ' + message.payload)\r\n          try {\r\n            const aPayload = JSON.parse(message.payload)\r\n            door1.iDoor1State = this.stateNotOk\r\n            if (aPayload.Door === 'offen') door1.iDoor1State = this.stateOpen\r\n            if (aPayload.Door === 'zu') door1.iDoor1State = this.stateClose\r\n            if (aPayload.Door === 'versperrt') door1.iDoor1State = this.stateLock\r\n          } catch (error) { }\r\n        }\r\n        // ---door type 4---------------------------------------\r\n        if (door1.type === 'something_else') {\r\n          try {\r\n            // ...add functionality for another sensor here...\r\n          } catch (error) { }\r\n        } // ------END work on different door1 types------------\r\n        // ---END door1 topic found ----------------------------\r\n      }\r\n    })\r\n  }\r\n\r\n  public publishCi (topic: string, payload: string): void {\r\n    // console.log('CiDoor1Controller:publishCi:', '-t ' + topic + ' -m ' + payload)\r\n    this.publish(topic, payload, false, 0).catch((e) => { console.error('CiDoor1Controller: ERROR:', e) })\r\n  }\r\n}\r\n\r\nexport const ciDoor1Controller = new CiDoor1Controller()\r\n"]}]}