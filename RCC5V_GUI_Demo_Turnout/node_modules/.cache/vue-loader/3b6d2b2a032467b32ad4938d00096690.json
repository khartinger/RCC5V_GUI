{"remainingRequest":"G:\\work3\\vue\\haus2\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!G:\\work3\\vue\\haus2\\src\\components\\CiTextarea.vue?vue&type=template&id=74529bf0&ts=true","dependencies":[{"path":"G:\\work3\\vue\\haus2\\src\\components\\CiTextarea.vue","mtime":1674497237760},{"path":"G:\\work3\\vue\\haus2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDwhLS1kcmF3IGJvcmRlci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLS0+DQogIDxDaUJhc2UgOng9IngiIDp5PSJ5IiA6Ym9yZGVyPSJib3JkZXIiIDpmeD0iZngiIDpmeT0iZnkiPjwvQ2lCYXNlPg0KICA8IS0tRHJhdyByZWN0YW5nbGUgMSwgaWYgbGluZSAxIGlzIGEgdGl0bGUtLS0tLS0tLS0tLS0tLS0tIC0tPg0KICA8cmVjdCB2LWlmPSJpc1JlY3QxIiBjbGFzcz0iY2lSZWN0IiA6eD0iZ2VvLngxKCkiIDp5PSJnZW8ueXIoMSkiIDp3aWR0aD0iZngqZ2VvLmR4by0yKmdlby5keG0iIDpoZWlnaHQ9Imdlby5keWwiIC8+DQogIDwhLS1jb252ZXJ0IHBheWxvYWQgaW50byB0ZXh0IGxpbmVzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLS0+DQogIDxkaXY+e3sgY29udmVydFBheWxvYWRJbnRvVGV4dExpbmVzIH19PC9kaXY+DQogIDwhLS1zaG93IGxpbmVzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLS0+DQogIDx0ZXh0IHYtZm9yPSJpbmRleCBpbiBtYXhMaW5lIiA6a2V5PSJpbmRleCIgY2xhc3M9ImNpRm9udDEiIDp4PSJnZW8ueHQoKSIgOnk9Il95dChpbmRleCkiPnt7bGluZVkoaW5kZXgpfX08L3RleHQ+DQogIDwhLS1kZWZpbmUgY2xpY2sgYXJlYS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLS0+DQogIDxyZWN0IEBjbGljaz0ib25DbGsoKSIgY2xhc3M9ImNpQ2xpY2siIDp4PSJnZW8ueDAoKSIgOnk9Imdlby55MCgpIiA6d2lkdGg9ImZ4Kmdlby5keG8iIDpoZWlnaHQ9ImZ5Kmdlby5keW8iIC8+DQo="},{"version":3,"sources":["G:\\work3\\vue\\haus2\\src\\components\\CiTextarea.vue"],"names":[],"mappings":";EAME,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACjE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EAClH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7D,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC","file":"G:/work3/vue/haus2/src/components/CiTextarea.vue","sourceRoot":"","sourcesContent":["<!--CiTextarea.vue---------------------------khartinger----- -->\r\n<!--2022-08-14: New                                          -->\r\n<!--2022-09-14: Update splitToArray()                        -->\r\n<!-- 2023-01-02: import { Geo } changed                      -->\r\n\r\n<template>\r\n  <!--draw border------------------------------------------- -->\r\n  <CiBase :x=\"x\" :y=\"y\" :border=\"border\" :fx=\"fx\" :fy=\"fy\"></CiBase>\r\n  <!--Draw rectangle 1, if line 1 is a title---------------- -->\r\n  <rect v-if=\"isRect1\" class=\"ciRect\" :x=\"geo.x1()\" :y=\"geo.yr(1)\" :width=\"fx*geo.dxo-2*geo.dxm\" :height=\"geo.dyl\" />\r\n  <!--convert payload into text lines----------------------- -->\r\n  <div>{{ convertPayloadIntoTextLines }}</div>\r\n  <!--show lines-------------------------------------------- -->\r\n  <text v-for=\"index in maxLine\" :key=\"index\" class=\"ciFont1\" :x=\"geo.xt()\" :y=\"_yt(index)\">{{lineY(index)}}</text>\r\n  <!--define click area------------------------------------- -->\r\n  <rect @click=\"onClk()\" class=\"ciClick\" :x=\"geo.x0()\" :y=\"geo.y0()\" :width=\"fx*geo.dxo\" :height=\"fy*geo.dyo\" />\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from '@vue/runtime-core'\r\nimport { Textarea, ciTextareaController } from '../controller/CiTextareaController'\r\nimport CiBase from './CiBase.vue'\r\nimport { Geo } from '../classes/Geo'\r\n\r\nlet gLines: string[] = []\r\n\r\nexport default defineComponent({\r\n  name: 'CiTextarea',\r\n  components: {\r\n    CiBase\r\n  },\r\n  data () {\r\n    return {\r\n      intervalHandle: null as any\r\n    }\r\n  },\r\n  props: {\r\n    x: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    y: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    border: {\r\n      type: Number,\r\n      required: false,\r\n      default: 1\r\n    },\r\n    sid: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    fx: {\r\n      type: Number,\r\n      required: false,\r\n      default: 1\r\n    },\r\n    fy: {\r\n      type: Number,\r\n      required: false,\r\n      default: 1\r\n    }\r\n  },\r\n  computed: {\r\n    textarea: function (): Textarea | undefined {\r\n      return ciTextareaController.textareas.find(textarea => textarea.id === this.sid)\r\n    },\r\n    iTextareaState: function (): number {\r\n      return this.textarea?.iTextareaState ?? -1\r\n    },\r\n    // -------provide geometric data----------------------------\r\n    geo: function (): Geo {\r\n      const geo1 = new Geo(this.x, this.y)\r\n      return geo1\r\n    },\r\n    isRect1: function (): boolean {\r\n      if (this.iTextareaState > 0) return true\r\n      return false\r\n    },\r\n    maxLine: function (): number {\r\n      const temp = Math.trunc((this.fy * this.geo.dyo - 2 * this.geo.dym) / this.geo.dyl)\r\n      // console.log('maxLine=', temp)\r\n      return temp\r\n    },\r\n    maxCharPerLine: function (): number {\r\n      return this.geo.calctmax(this.fx)\r\n    },\r\n\r\n    // -------text in line ...----------------------------------\r\n    // convertPayloadIntoTextLines: function (): Array<string> {\r\n    // eslint-disable-next-line vue/return-in-computed-property\r\n    convertPayloadIntoTextLines: function (): void {\r\n      const aLines = []\r\n      if (this.textarea) {\r\n        aLines.push('') // no line 0\r\n        let s1 = this.textarea.payload\r\n        // console.log('textarea.payload=', s1)\r\n        s1 = s1.replaceAll('\\\\n', '^~') // replace \"text\" \\\\n\r\n        s1 = s1.replaceAll('\\n', '^~') //  replace \"text\" \\n\r\n        let aPay: string[] = []\r\n        aPay = s1.split('^~')\r\n        if (aPay === null) {\r\n          const aPay: string[] = []\r\n          aPay[0] = s1\r\n        }\r\n        let iPay = 0 //                index of payload \"lines\"\r\n        const numPay = aPay.length\r\n        // console.log('Anzahl \\\\n=', numPay)\r\n        // console.log('Payload: ', aPay)\r\n        // ---should line 1 be a title?-------------------------\r\n        let iLine = 0 //               index of lines to display\r\n        if (this.textarea.iTextareaState === 1) { // title = name\r\n          if (this.textarea.name) aLines[iLine++] = this._checkLen(this.textarea.name)\r\n          else aLines[iLine++] = ''\r\n        }\r\n        if (this.textarea.iTextareaState === 2) { // title = id\r\n          aLines[iLine++] = this._checkLen(this.textarea.id)\r\n        }\r\n        if (this.textarea.iTextareaState === 4) { // title = payload line 0\r\n          aLines[iLine++] = this._checkLen(aPay[iPay++])\r\n        }\r\n        // ---convert payload lines into display lines----------\r\n        let aHelp: string[] = []\r\n        for (let i1 = iPay; i1 < numPay; i1++) {\r\n          if (!aPay[iPay]) break\r\n          // console.log('Payload aPay: ', aPay)\r\n          aHelp = this.splitToArray(aPay[iPay++], this.maxCharPerLine)\r\n          // console.log('aHelp: ', aHelp)\r\n          const lenHelp = aHelp.length\r\n          // -transfer help lines to display lines--------------\r\n          for (let i2 = 0; i2 < lenHelp; i2++) {\r\n            aLines[iLine++] = aHelp[i2]\r\n            if (iLine > this.maxLine) { // finished. End for loops\r\n              i2 = lenHelp\r\n              i1 = numPay\r\n            }\r\n          }\r\n        }\r\n      }\r\n      // eslint-disable-next-line vue/no-side-effects-in-computed-properties\r\n      gLines = aLines\r\n      // return aLines\r\n    },\r\n\r\n    // -------color line 2 to 4 depending on iTextareaState------\r\n    colorState: function (): string {\r\n      return 'none'\r\n    },\r\n    border0: function (): boolean {\r\n      if (this.border > 1) return true\r\n      return false\r\n    },\r\n    border1: function (): boolean {\r\n      if (this.border > 0) return true\r\n      return false\r\n    }\r\n  },\r\n\r\n  mounted: function (): void {\r\n    // this.onClk()\r\n    this.intervalHandle = setInterval(() => {\r\n      this.onClk()\r\n    }, 1800000)\r\n  },\r\n  unmounted: function (): void {\r\n    clearInterval(this.intervalHandle)\r\n  },\r\n\r\n  methods: {\r\n    _yt: function (index: number): number {\r\n      const yt1to5 = this.geo.yt(1 + ((index - 1) % 5))\r\n      const temp = yt1to5 + this.geo.dyi * Math.trunc((index - 1) / 5)\r\n      return temp\r\n    },\r\n    // -------text in line ...----------------------------------\r\n    lineY: function (linenumber: number): string {\r\n      if (linenumber < 1 || linenumber > this.maxLine) return ''\r\n      return gLines[linenumber - 1]\r\n    },\r\n\r\n    // -------check text length---------------------------------\r\n    _checkLen: function (text: string): string {\r\n      if (text) {\r\n        if (text.length > this.maxCharPerLine) return text.substring(0, this.maxCharPerLine)\r\n        return text\r\n      }\r\n      return ''\r\n    },\r\n    // ----split a string to an array of strings with max len-----\r\n    // Special: (try to) do not split words with 2 char (-> next line)\r\n    // s1: given string\r\n    // maxCharPerLine_: max number of char per element in a1\r\n    splitToArray: function (s1: string, maxCharPerLine_: number): Array<string> {\r\n      // console.log('splitToArray s1: ', s1)\r\n      // console.log('splitToArray maxCharPerLine_: ', maxCharPerLine_)\r\n      const a1: string[] = []\r\n      if (maxCharPerLine_ < 1) return a1\r\n      const s1len = s1.length\r\n      if (s1len < 1) return a1\r\n      let ia1 = 0 //         Index of line in a1\r\n      let iStart = 0 //      Index of start char in s1 of this line\r\n      let doloop = true\r\n      do {\r\n        let iEnd = iStart + maxCharPerLine_\r\n        if (iEnd >= s1len) {\r\n          // ......last line....................................\r\n          a1[ia1] = s1.substring(iStart)\r\n          doloop = false\r\n        } else {\r\n          // ......not the last line............................\r\n          if (maxCharPerLine_ > 1) {\r\n            // . . is the next to last letter a space? . . . . .\r\n            if (s1[iEnd - 2] === ' ') iEnd = iEnd - 1\r\n          }\r\n          // ......store line...................................\r\n          a1[ia1++] = s1.substring(iStart, iEnd)\r\n          iStart = iEnd //   prepare start of next line\r\n        }\r\n      }\r\n      while (doloop)\r\n      // console.log('splitToArray a1: ', a1)\r\n      return a1\r\n    },\r\n\r\n    /*\r\n    splitToArray: function (s1: string, maxCharPerLine_: number): Array<string> {\r\n      const a1: string[] = []\r\n      let i1 = 0 //            Index of char in s1\r\n      let ia1 = 0 //           Index of line in a1\r\n      let iStart = 0 //        Index of start char in s1 of this line\r\n      // console.log('splitToArray s1: ', s1)\r\n      // console.log('splitToArray maxCharPerLine_: ', maxCharPerLine_)\r\n      console.log('s1=', s1)\r\n      const lens1 = s1.length\r\n      for (i1 = 0; i1 < lens1; i1++) {\r\n        let iEnd = iStart + maxCharPerLine_\r\n        if (iEnd > lens1) {\r\n          iEnd = lens1\r\n          i1 = lens1 // end of for loop\r\n        } else {\r\n          if (s1.at(iEnd - 2) === ' ') {\r\n            if ((iEnd !== lens1) && s1.at(iEnd) !== ' ') iEnd = iEnd - 1\r\n          } else {\r\n            if (s1.at(iEnd) === ' ') iEnd++\r\n          }\r\n          a1[ia1++] = s1.substring(iStart, iEnd)\r\n          iStart = iEnd\r\n        }\r\n      }\r\n      // console.log('splitToArray a1: ', a1)\r\n      return a1\r\n    },\r\n    */\r\n    // -------react on click: publish a message (if any exists)-\r\n    onClk: function (): void {\r\n      // console.log(this.sid, 'Textarea-Click')\r\n      if (this.textarea) {\r\n        if (this.textarea.pubTopic) {\r\n          let payload = '?'\r\n          const aPubTopic = this.textarea.pubTopic.split(' ')\r\n          // -publish all given topics--------------------------\r\n          aPubTopic.forEach((topic: string) => {\r\n            if (this.textarea?.pubPayload) payload = this.textarea.pubPayload\r\n            ciTextareaController.publishCi(topic, payload)\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"]}]}