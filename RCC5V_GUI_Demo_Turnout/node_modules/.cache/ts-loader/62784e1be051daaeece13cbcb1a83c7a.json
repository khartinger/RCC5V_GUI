{"remainingRequest":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js??ref--13-1!G:\\work3\\vue\\haus2\\src\\controller\\CiDoorController.ts","dependencies":[{"path":"G:\\work3\\vue\\haus2\\src\\controller\\CiDoorController.ts","mtime":1663146168848},{"path":"G:\\work3\\vue\\haus2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\work3\\vue\\haus2\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSAidHNsaWIiOw0KLy8gX19fX19fQ2lEb29yQ29udHJvbGxlci50c19fX19fX19fX19fX19fX19fX19fX2toYXJ0aW5nZXJfX19fXw0KLy8gMjAyMi0wOS0xNDogYWRkIC5jYXRjaCgoZSkgLi4pIHRvIHRoaXMucHVibGlzaA0KaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICd2dWUnOw0KaW1wb3J0IHsgQ2lCYXNlQ29udHJvbGxlciB9IGZyb20gJy4vQ2lCYXNlQ29udHJvbGxlcic7DQp2YXIgQ2lEb29yQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsNCiAgICBfX2V4dGVuZHMoQ2lEb29yQ29udHJvbGxlciwgX3N1cGVyKTsNCiAgICBmdW5jdGlvbiBDaURvb3JDb250cm9sbGVyKCkgew0KICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsNCiAgICAgICAgX3RoaXMuZG9vcnMgPSByZWFjdGl2ZShbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICd0ZTF2bzEnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdFaW5nYW5nID8nLA0KICAgICAgICAgICAgICAgIGlEb29yU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIHR5cGU6ICd6YicsDQogICAgICAgICAgICAgICAgYmF0dGVyeTogJy0nLA0KICAgICAgICAgICAgICAgIHN1YlRvcGljOiAnemIvaC92ci90dWVyZS8tMScsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAndGUxdm8yJywNCiAgICAgICAgICAgICAgICBuYW1lOiAnSGludGVuID8nLA0KICAgICAgICAgICAgICAgIGlEb29yU3RhdGU6IC0xLA0KICAgICAgICAgICAgICAgIHR5cGU6ICd6YicsDQogICAgICAgICAgICAgICAgYmF0dGVyeTogJy0nLA0KICAgICAgICAgICAgICAgIHN1YlRvcGljOiAnemIvaC92ci90dWVyZS8tMicsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAndGUxYXIxemInLA0KICAgICAgICAgICAgICAgIG5hbWU6ICd6YicsDQogICAgICAgICAgICAgICAgaURvb3JTdGF0ZTogLTEsDQogICAgICAgICAgICAgICAgdHlwZTogJ3piJywNCiAgICAgICAgICAgICAgICBiYXR0ZXJ5OiAnLScsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICd6Yi9oL2F6L3R1ZXJlLy0xJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICd0ZTFhcjEnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdEMScsDQogICAgICAgICAgICAgICAgaURvb3JTdGF0ZTogLTEsDQogICAgICAgICAgICAgICAgdHlwZTogJ0QxJywNCiAgICAgICAgICAgICAgICBiYXR0ZXJ5OiAnLScsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICdlMS9hci90dWVyZS8xL3JldC9zdGF0dXMgZTEvYXIvdHVlcmUvMS9yZXQvdm9sdGFnZScsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAndGUxd28yemInLA0KICAgICAgICAgICAgICAgIG5hbWU6ICcgJywNCiAgICAgICAgICAgICAgICBpRG9vclN0YXRlOiAtMSwNCiAgICAgICAgICAgICAgICB0eXBlOiAnemInLA0KICAgICAgICAgICAgICAgIC8vIGJhdHRlcnk6ICctJywNCiAgICAgICAgICAgICAgICBzdWJUb3BpYzogJ3piL2gvd3ovdHVlcmUvLTInLA0KICAgICAgICAgICAgICAgIHB1YlRvcGljOiAnJw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogJ3RlMXdvMXpiJywNCiAgICAgICAgICAgICAgICBuYW1lOiAnV29obnogPycsDQogICAgICAgICAgICAgICAgaURvb3JTdGF0ZTogLTEsDQogICAgICAgICAgICAgICAgdHlwZTogJ3piJywNCiAgICAgICAgICAgICAgICBiYXR0ZXJ5OiAnLScsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICd6Yi9oL3d6L3R1ZXJlLy0xJywNCiAgICAgICAgICAgICAgICBwdWJUb3BpYzogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWQ6ICd0ZTF3bzEnLA0KICAgICAgICAgICAgICAgIG5hbWU6ICdEMScsDQogICAgICAgICAgICAgICAgaURvb3JTdGF0ZTogLTEsDQogICAgICAgICAgICAgICAgdHlwZTogJ0QxJywNCiAgICAgICAgICAgICAgICBiYXR0ZXJ5OiAnLScsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICdlMS93by90dWVyZS8xL3JldC9zdGF0dXMgZTEvd28vdHVlcmUvMS9yZXQvdm9sdGFnZScsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAndGUzaHUxJywNCiAgICAgICAgICAgICAgICBuYW1lOiAnVMO8cmUgPycsDQogICAgICAgICAgICAgICAgaURvb3JTdGF0ZTogLTEsDQogICAgICAgICAgICAgICAgdHlwZTogJ2h1dCcsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICdlMy9odS9yZXQvc3RhdHVzIGQzL2h1L3JldC90dWVyZScsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAndGUxYXIxJywNCiAgICAgICAgICAgICAgICBuYW1lOiAnVEVTVCcsDQogICAgICAgICAgICAgICAgaURvb3JTdGF0ZTogLTEsDQogICAgICAgICAgICAgICAgdHlwZTogJ0QxJywNCiAgICAgICAgICAgICAgICBiYXR0ZXJ5OiAnLScsDQogICAgICAgICAgICAgICAgc3ViVG9waWM6ICdlMS9hci90dWVyZS8xL3JldC9zdGF0dXMgZTEvYXIvdHVlcmUvMS9yZXQvdm9sdGFnZScsDQogICAgICAgICAgICAgICAgcHViVG9waWM6ICcnDQogICAgICAgICAgICB9DQogICAgICAgIF0pOw0KICAgICAgICByZXR1cm4gX3RoaXM7DQogICAgfQ0KICAgIC8vIC0tLS0tLS0tLU1lc3NhZ2UgZm9yIHRoaXMgY2kgKGNvbnRyb2wvaW5kaWNhdG9yKT8tLS0tLS0tLS0tDQogICAgQ2lEb29yQ29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsNCiAgICAgICAgdGhpcy5kb29ycy5mb3JFYWNoKGZ1bmN0aW9uIChkb29yKSB7DQogICAgICAgICAgICB2YXIgYVN1YlRvcGljID0gZG9vci5zdWJUb3BpYy5zcGxpdCgnICcpOw0KICAgICAgICAgICAgaWYgKGFTdWJUb3BpYy5pbmNsdWRlcyhtZXNzYWdlLnRvcGljKSkgew0KICAgICAgICAgICAgICAgIC8vIC0tLWRvb3IgdG9waWMgZm91bmQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgICAgICAgICAgICAgaWYgKGRvb3IudHlwZSA9PT0gJ3piJykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYVBheWxvYWQgPSBKU09OLnBhcnNlKG1lc3NhZ2UucGF5bG9hZCk7DQogICAgICAgICAgICAgICAgICAgIGRvb3IuYmF0dGVyeSA9ICIiICsgYVBheWxvYWQuYmF0dGVyeTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGRvb3JzdGF0ZV8gPSBTdHJpbmcoYVBheWxvYWQuY29udGFjdCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChkb29yc3RhdGVfID09PSAndHJ1ZScpDQogICAgICAgICAgICAgICAgICAgICAgICBkb29yLmlEb29yU3RhdGUgPSAwOw0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb29yc3RhdGVfID09PSAnZmFsc2UnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IuaURvb3JTdGF0ZSA9IDE7DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9vci5pRG9vclN0YXRlID0gLTE7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0Rvb3JDb250cm9sbGVyOm9uTWVzc2FnZSgpLXpiJywgZG9vci5pRG9vclN0YXRlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGRvb3IudHlwZSA9PT0gJ0QxJykgew0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRG9vckNvbnRyb2xsZXI6b25NZXNzYWdlKCktRDE6ICcsIGBkb29yIGZvdW5kICR7bWVzc2FnZS50b3BpY318JHttZXNzYWdlLnBheWxvYWR9YCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnRvcGljLmluY2x1ZGVzKCdzdGF0dXMnKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChtZXNzYWdlLnBheWxvYWQgPT09ICcxJykgfHwgKG1lc3NhZ2UucGF5bG9hZCA9PT0gJ2VpbicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IuaURvb3JTdGF0ZSA9IDE7DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG1lc3NhZ2UucGF5bG9hZCA9PT0gJzAnKSB8fCAobWVzc2FnZS5wYXlsb2FkID09PSAnYXVzJykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IuaURvb3JTdGF0ZSA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvb3IuaURvb3JTdGF0ZSA9IC0xOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50b3BpYy5pbmNsdWRlcygndm9sdGFnZScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkb29yLmJhdHRlcnkgPSAiIiArIG1lc3NhZ2UucGF5bG9hZDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoZG9vci50eXBlID09PSAnaHV0Jykgew0KICAgICAgICAgICAgICAgICAgICAvLyAtZG9vciBzdGF0ZSBmcm9tIGh1ZXR0ZSAtIHN0YXR1cy0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0NpRG9vckNvbnRyb2xsZXIub25NZXNzYWdlIC10ICcsIG1lc3NhZ2UudG9waWMgKyAnIC1tICcgKyBtZXNzYWdlLnBheWxvYWQpDQogICAgICAgICAgICAgICAgICAgIHZhciBhUGF5bG9hZCA9IEpTT04ucGFyc2UobWVzc2FnZS5wYXlsb2FkKTsNCiAgICAgICAgICAgICAgICAgICAgZG9vci5pRG9vclN0YXRlID0gLTE7DQogICAgICAgICAgICAgICAgICAgIGlmIChhUGF5bG9hZC5Eb29yID09PSAnb2ZmZW4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZG9vci5pRG9vclN0YXRlID0gMTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFQYXlsb2FkLkRvb3IgPT09ICd6dScpDQogICAgICAgICAgICAgICAgICAgICAgICBkb29yLmlEb29yU3RhdGUgPSAwOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYVBheWxvYWQuRG9vciA9PT0gJ3ZlcnNwZXJydCcpDQogICAgICAgICAgICAgICAgICAgICAgICBkb29yLmlEb29yU3RhdGUgPSAyOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gRU5EIGRvb3IgdG9waWMgZm91bmQNCiAgICAgICAgfSk7DQogICAgfTsNCiAgICBDaURvb3JDb250cm9sbGVyLnByb3RvdHlwZS5wdWJsaXNoQ2kgPSBmdW5jdGlvbiAodG9waWMsIHBheWxvYWQpIHsNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ3B1Ymxpc2g6JywgJy10ICcgKyB0b3BpYyArICcgLW0gJyArIHBheWxvYWQpDQogICAgICAgIHRoaXMucHVibGlzaCh0b3BpYywgcGF5bG9hZCwgZmFsc2UsIDApLmNhdGNoKGZ1bmN0aW9uIChlKSB7IGNvbnNvbGUuZXJyb3IoJ0NpRG9vckNvbnRyb2xsZXI6IEVSUk9SOicsIGUpOyB9KTsNCiAgICB9Ow0KICAgIHJldHVybiBDaURvb3JDb250cm9sbGVyOw0KfShDaUJhc2VDb250cm9sbGVyKSk7DQpleHBvcnQgeyBDaURvb3JDb250cm9sbGVyIH07DQpleHBvcnQgdmFyIGNpRG9vckNvbnRyb2xsZXIgPSBuZXcgQ2lEb29yQ29udHJvbGxlcigpOw0K"},{"version":3,"file":"G:\\work3\\vue\\haus2\\src\\controller\\CiDoorController.ts","sourceRoot":"","sources":["G:\\work3\\vue\\haus2\\src\\controller\\CiDoorController.ts"],"names":[],"mappings":"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","sourcesContent":["// ______CiDoorController.ts_____________________khartinger_____\r\n// 2022-09-14: add .catch((e) ..) to this.publish\r\nimport { reactive } from 'vue'\r\nimport { Message } from '@/services/CiMqttClient'\r\nimport { CiBaseController, IBase } from './CiBaseController'\r\n\r\nexport interface Door extends IBase {\r\n  iDoorState: number;\r\n  type: string;\r\n  battery?: string;\r\n  text5?: string;\r\n}\r\n\r\nexport class CiDoorController extends CiBaseController {\r\n  public doors: Array<Door> = reactive(\r\n    [\r\n      { // Erdgeschoss: Bereich 1, Vorraum Eingangstuere vorne\r\n        id: 'te1vo1',\r\n        name: 'Eingang ?',\r\n        iDoorState: -1,\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/vr/tuere/-1',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 1, Vorraum Eingangstuere hinten\r\n        id: 'te1vo2',\r\n        name: 'Hinten ?',\r\n        iDoorState: -1,\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/vr/tuere/-2',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 1, Altbau/Arbeitszimmer\r\n        id: 'te1ar1zb',\r\n        name: 'zb',\r\n        iDoorState: -1,\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/az/tuere/-1',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 1, Altbau/Arbeitszimmer\r\n        id: 'te1ar1',\r\n        name: 'D1',\r\n        iDoorState: -1,\r\n        type: 'D1',\r\n        battery: '-',\r\n        subTopic: 'e1/ar/tuere/1/ret/status e1/ar/tuere/1/ret/voltage',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 1, Wohnzimmer(-Vorraum)\r\n        id: 'te1wo2zb',\r\n        name: ' ',\r\n        iDoorState: -1,\r\n        type: 'zb',\r\n        // battery: '-',\r\n        subTopic: 'zb/h/wz/tuere/-2',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 1, Wohnzimmer(-Vorraum)\r\n        id: 'te1wo1zb',\r\n        name: 'Wohnz ?',\r\n        iDoorState: -1,\r\n        type: 'zb',\r\n        battery: '-',\r\n        subTopic: 'zb/h/wz/tuere/-1',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 1, Wohnzimmer(-Vorraum)\r\n        id: 'te1wo1',\r\n        name: 'D1',\r\n        iDoorState: -1,\r\n        type: 'D1',\r\n        battery: '-',\r\n        subTopic: 'e1/wo/tuere/1/ret/status e1/wo/tuere/1/ret/voltage',\r\n        pubTopic: ''\r\n      },\r\n      { // Erdgeschoss: Bereich 3, Huette\r\n        id: 'te3hu1',\r\n        name: 'TÃ¼re ?',\r\n        iDoorState: -1,\r\n        type: 'hut',\r\n        subTopic: 'e3/hu/ret/status d3/hu/ret/tuere',\r\n        pubTopic: ''\r\n      },\r\n      { // TEST\r\n        id: 'te1ar1',\r\n        name: 'TEST',\r\n        iDoorState: -1,\r\n        type: 'D1',\r\n        battery: '-',\r\n        subTopic: 'e1/ar/tuere/1/ret/status e1/ar/tuere/1/ret/voltage',\r\n        pubTopic: ''\r\n      }\r\n\r\n    ]\r\n  );\r\n\r\n  // ---------Message for this ci (control/indicator)?----------\r\n  public onMessage (message: Message): void {\r\n    this.doors.forEach(door => {\r\n      const aSubTopic = door.subTopic.split(' ')\r\n      if (aSubTopic.includes(message.topic)) {\r\n        // ---door topic found ---------------------------------\r\n        if (door.type === 'zb') {\r\n          const aPayload = JSON.parse(message.payload)\r\n          door.battery = `${aPayload.battery}`\r\n          const doorstate_ = String(aPayload.contact)\r\n          if (doorstate_ === 'true') door.iDoorState = 0\r\n          else {\r\n            if (doorstate_ === 'false') door.iDoorState = 1\r\n            else door.iDoorState = -1\r\n          }\r\n          // console.log('DoorController:onMessage()-zb', door.iDoorState);\r\n        }\r\n        if (door.type === 'D1') {\r\n          // console.log('DoorController:onMessage()-D1: ', `door found ${message.topic}|${message.payload}`);\r\n          if (message.topic.includes('status')) {\r\n            if ((message.payload === '1') || (message.payload === 'ein')) door.iDoorState = 1\r\n            else {\r\n              if ((message.payload === '0') || (message.payload === 'aus')) door.iDoorState = 0\r\n              else { door.iDoorState = -1 }\r\n            }\r\n          }\r\n          if (message.topic.includes('voltage')) {\r\n            door.battery = `${message.payload}`\r\n          }\r\n        }\r\n        if (door.type === 'hut') {\r\n          // -door state from huette - status-------------------\r\n          // console.log('CiDoorController.onMessage -t ', message.topic + ' -m ' + message.payload)\r\n          const aPayload = JSON.parse(message.payload)\r\n          door.iDoorState = -1\r\n          if (aPayload.Door === 'offen') door.iDoorState = 1\r\n          if (aPayload.Door === 'zu') door.iDoorState = 0\r\n          if (aPayload.Door === 'versperrt') door.iDoorState = 2\r\n        }\r\n      } // END door topic found\r\n    })\r\n  }\r\n\r\n  public publishCi (topic: string, payload: string): void {\r\n    // console.log('publish:', '-t ' + topic + ' -m ' + payload)\r\n    this.publish(topic, payload, false, 0).catch((e) => { console.error('CiDoorController: ERROR:', e) })\r\n  }\r\n}\r\n\r\nexport const ciDoorController = new CiDoorController()\r\n"]}]}